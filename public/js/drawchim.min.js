!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.Drawchim=f()}}(function(){var define;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";var $$=require("domquery"),ExtendDefault=require("./src/extend_default"),TemplateEngine=require("./src/template-engine"),Touchy=require("touchy");Touchy.enableOn(document);var drawChim=function(options){if(!(this instanceof drawChim))return new drawChim;var defaults={selector:null,clearBtn:null,stains:["255, 0, 0","0, 255, 0","0, 0, 255","0, 0, 0"]};arguments[0]&&"object"==typeof arguments[0]&&(this.options=ExtendDefault(defaults,arguments[0])),this.canvas=this.options.selector,this.canvas.width=1e3,this.canvas.height=788,this.canvas.bgColor="#ffffff",this.isDown=!1,this.blankCanvas=!0,this.ctx=this.canvas.getContext("2d"),this.canvasX,this.canvasY,this._init()};drawChim.prototype._init=function(){this.createCanvas(),this.setEvents(),this.storeCanvasAsImage()},drawChim.prototype.createCanvas=function(){this.ctx.fillStyle=this.canvas.bgColor,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.lineWidth=6,this.ctx.lineCap="round",this.ctx.strokeStyle="rgba(58, 56, 68, 0.5)",this.createStain()},drawChim.prototype.createStain=function(){var template='<ul class="stains"><%for(var index in this.colors) {%><li data-color="<%this.colors[index]%>" style="background:rgb(<%this.colors[index]%>)"></li><%}%><li class="add-stain">+</li></ul>',stainHolder=document.getElementById("stain-pallet"),stains=TemplateEngine(template,{colors:this.options.stains});stainHolder.innerHTML=stains},drawChim.prototype.setEvents=function(){var _this=this;this.canvas.addEventListener("touchstart",function(e){e.preventDefault(),_this.drawStart(e)},!1),this.canvas.addEventListener("touchmove",function(e){_this.drawMove(e)},!1),this.canvas.addEventListener("touchend",function(e){_this.drawEnd()},!1),this.options.clearBtn.addEventListener("touchstart",function(){_this.clearCanvas()},!1),$$(".stains li").on("touchstart",function(e){_this.swapColor(e)}),this.canvas.addEventListener("tap:hold",function(e){_this.colorPickerCircle(e)})},drawChim.prototype.swapColor=function(event){var elm=event.srcElement,newColor=elm.dataset.color;$$(".stains li").removeClass("is-active"),$$(elm).addClass("is-active"),this.ctx.strokeStyle="rgba("+newColor+", 0.5)"},drawChim.prototype.colorPickerCircle=function(e){var touchObj=e.detail,stainCircle=document.getElementById("stain-circle");this.canvasX=touchObj.pageX-100,this.canvasY=touchObj.pageY-100,stainCircle.style.top=this.canvasY+"px",stainCircle.style.left=this.canvasX+"px",setTimeout(function(){$$(stainCircle).addClass("is-active")},300)},drawChim.prototype.drawStart=function(e){var touchObj=e.changedTouches[0];this.blankCanvas&&this.storeHistory(),this.isDown=!0,this.ctx.beginPath(),this.canvasX=touchObj.pageX-this.canvas.offsetLeft,this.canvasY=touchObj.pageY-this.canvas.offsetTop,this.ctx.moveTo(this.canvasX,this.canvasY)},drawChim.prototype.drawMove=function(e){var touchObj=e.changedTouches[0];this.isDown!==!1&&(this.canvasX=touchObj.pageX-this.canvas.offsetLeft,this.canvasY=touchObj.pageY-this.canvas.offsetTop,this.ctx.lineTo(this.canvasX,this.canvasY),this.ctx.stroke())},drawChim.prototype.drawEnd=function(){this.isDown=!1,this.ctx.closePath(),this.storeHistory()},drawChim.prototype.storeHistory=function(){var img=this.canvas.toDataURL("image/png");history.pushState({imageData:img},"",window.location.href),window.localStorage&&(localStorage.curImg=img)},drawChim.prototype.storeCanvasAsImage=function(){var _this=this;if(window.localStorage){var img=new Image;img.onload=function(){_this.ctx.drawImage(img,0,0)},localStorage.curImg&&(img.src=localStorage.curImg,this.blankCanvas=!1)}},drawChim.prototype.clearCanvas=function(){this.ctx.fillStyle=this.canvas.bgColor,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.storeHistory()},module.exports=drawChim},{"./src/extend_default":70,"./src/template-engine":71,domquery:12,touchy:50}],2:[function(require,module,exports){function replacer(key,value){return util.isUndefined(value)?""+value:util.isNumber(value)&&!isFinite(value)?value.toString():util.isFunction(value)||util.isRegExp(value)?value.toString():value}function truncate(s,n){return util.isString(s)?s.length<n?s:s.slice(0,n):s}function getMessage(self){return truncate(JSON.stringify(self.actual,replacer),128)+" "+self.operator+" "+truncate(JSON.stringify(self.expected,replacer),128)}function fail(actual,expected,message,operator,stackStartFunction){throw new assert.AssertionError({message:message,actual:actual,expected:expected,operator:operator,stackStartFunction:stackStartFunction})}function ok(value,message){value||fail(value,!0,message,"==",assert.ok)}function _deepEqual(actual,expected){if(actual===expected)return!0;if(util.isBuffer(actual)&&util.isBuffer(expected)){if(actual.length!=expected.length)return!1;for(var i=0;i<actual.length;i++)if(actual[i]!==expected[i])return!1;return!0}return util.isDate(actual)&&util.isDate(expected)?actual.getTime()===expected.getTime():util.isRegExp(actual)&&util.isRegExp(expected)?actual.source===expected.source&&actual.global===expected.global&&actual.multiline===expected.multiline&&actual.lastIndex===expected.lastIndex&&actual.ignoreCase===expected.ignoreCase:util.isObject(actual)||util.isObject(expected)?objEquiv(actual,expected):actual==expected}function isArguments(object){return"[object Arguments]"==Object.prototype.toString.call(object)}function objEquiv(a,b){if(util.isNullOrUndefined(a)||util.isNullOrUndefined(b))return!1;if(a.prototype!==b.prototype)return!1;if(util.isPrimitive(a)||util.isPrimitive(b))return a===b;var aIsArgs=isArguments(a),bIsArgs=isArguments(b);if(aIsArgs&&!bIsArgs||!aIsArgs&&bIsArgs)return!1;if(aIsArgs)return a=pSlice.call(a),b=pSlice.call(b),_deepEqual(a,b);var key,i,ka=objectKeys(a),kb=objectKeys(b);if(ka.length!=kb.length)return!1;for(ka.sort(),kb.sort(),i=ka.length-1;i>=0;i--)if(ka[i]!=kb[i])return!1;for(i=ka.length-1;i>=0;i--)if(key=ka[i],!_deepEqual(a[key],b[key]))return!1;return!0}function expectedException(actual,expected){return actual&&expected?"[object RegExp]"==Object.prototype.toString.call(expected)?expected.test(actual):actual instanceof expected?!0:expected.call({},actual)===!0?!0:!1:!1}function _throws(shouldThrow,block,expected,message){var actual;util.isString(expected)&&(message=expected,expected=null);try{block()}catch(e){actual=e}if(message=(expected&&expected.name?" ("+expected.name+").":".")+(message?" "+message:"."),shouldThrow&&!actual&&fail(actual,expected,"Missing expected exception"+message),!shouldThrow&&expectedException(actual,expected)&&fail(actual,expected,"Got unwanted exception"+message),shouldThrow&&actual&&expected&&!expectedException(actual,expected)||!shouldThrow&&actual)throw actual}var util=require("util/"),pSlice=Array.prototype.slice,hasOwn=Object.prototype.hasOwnProperty,assert=module.exports=ok;assert.AssertionError=function(options){this.name="AssertionError",this.actual=options.actual,this.expected=options.expected,this.operator=options.operator,options.message?(this.message=options.message,this.generatedMessage=!1):(this.message=getMessage(this),this.generatedMessage=!0);var stackStartFunction=options.stackStartFunction||fail;if(Error.captureStackTrace)Error.captureStackTrace(this,stackStartFunction);else{var err=new Error;if(err.stack){var out=err.stack,fn_name=stackStartFunction.name,idx=out.indexOf("\n"+fn_name);if(idx>=0){var next_line=out.indexOf("\n",idx+1);out=out.substring(next_line+1)}this.stack=out}}},util.inherits(assert.AssertionError,Error),assert.fail=fail,assert.ok=ok,assert.equal=function(actual,expected,message){actual!=expected&&fail(actual,expected,message,"==",assert.equal)},assert.notEqual=function(actual,expected,message){actual==expected&&fail(actual,expected,message,"!=",assert.notEqual)},assert.deepEqual=function(actual,expected,message){_deepEqual(actual,expected)||fail(actual,expected,message,"deepEqual",assert.deepEqual)},assert.notDeepEqual=function(actual,expected,message){_deepEqual(actual,expected)&&fail(actual,expected,message,"notDeepEqual",assert.notDeepEqual)},assert.strictEqual=function(actual,expected,message){actual!==expected&&fail(actual,expected,message,"===",assert.strictEqual)},assert.notStrictEqual=function(actual,expected,message){actual===expected&&fail(actual,expected,message,"!==",assert.notStrictEqual)},assert["throws"]=function(block,error,message){_throws.apply(this,[!0].concat(pSlice.call(arguments)))},assert.doesNotThrow=function(block,message){_throws.apply(this,[!1].concat(pSlice.call(arguments)))},assert.ifError=function(err){if(err)throw err};var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj)hasOwn.call(obj,key)&&keys.push(key);return keys}},{"util/":11}],3:[function(require,module,exports){},{}],4:[function(require,module,exports){(function(global){"use strict";function typedArraySupport(){function Bar(){}try{var arr=new Uint8Array(1);return arr.foo=function(){return 42},arr.constructor=Bar,42===arr.foo()&&arr.constructor===Bar&&"function"==typeof arr.subarray&&0===arr.subarray(1,1).byteLength}catch(e){return!1}}function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Buffer(arg){return this instanceof Buffer?(Buffer.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof arg?fromNumber(this,arg):"string"==typeof arg?fromString(this,arg,arguments.length>1?arguments[1]:"utf8"):fromObject(this,arg)):arguments.length>1?new Buffer(arg,arguments[1]):new Buffer(arg)}function fromNumber(that,length){if(that=allocate(that,0>length?0:0|checked(length)),!Buffer.TYPED_ARRAY_SUPPORT)for(var i=0;length>i;i++)that[i]=0;return that}function fromString(that,string,encoding){("string"!=typeof encoding||""===encoding)&&(encoding="utf8");var length=0|byteLength(string,encoding);return that=allocate(that,length),that.write(string,encoding),that}function fromObject(that,object){if(Buffer.isBuffer(object))return fromBuffer(that,object);if(isArray(object))return fromArray(that,object);if(null==object)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(object.buffer instanceof ArrayBuffer)return fromTypedArray(that,object);if(object instanceof ArrayBuffer)return fromArrayBuffer(that,object)}return object.length?fromArrayLike(that,object):fromJsonObject(that,object)}function fromBuffer(that,buffer){var length=0|checked(buffer.length);return that=allocate(that,length),buffer.copy(that,0,0,length),that}function fromArray(that,array){var length=0|checked(array.length);that=allocate(that,length);for(var i=0;length>i;i+=1)that[i]=255&array[i];return that}function fromTypedArray(that,array){var length=0|checked(array.length);that=allocate(that,length);for(var i=0;length>i;i+=1)that[i]=255&array[i];return that}function fromArrayBuffer(that,array){return Buffer.TYPED_ARRAY_SUPPORT?(array.byteLength,that=Buffer._augment(new Uint8Array(array))):that=fromTypedArray(that,new Uint8Array(array)),that}function fromArrayLike(that,array){var length=0|checked(array.length);that=allocate(that,length);for(var i=0;length>i;i+=1)that[i]=255&array[i];return that}function fromJsonObject(that,object){var array,length=0;"Buffer"===object.type&&isArray(object.data)&&(array=object.data,length=0|checked(array.length)),that=allocate(that,length);for(var i=0;length>i;i+=1)that[i]=255&array[i];return that}function allocate(that,length){Buffer.TYPED_ARRAY_SUPPORT?(that=Buffer._augment(new Uint8Array(length)),that.__proto__=Buffer.prototype):(that.length=length,that._isBuffer=!0);var fromPool=0!==length&&length<=Buffer.poolSize>>>1;return fromPool&&(that.parent=rootParent),that}function checked(length){if(length>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|length}function SlowBuffer(subject,encoding){if(!(this instanceof SlowBuffer))return new SlowBuffer(subject,encoding);var buf=new Buffer(subject,encoding);return delete buf.parent,buf}function byteLength(string,encoding){"string"!=typeof string&&(string=""+string);var len=string.length;if(0===len)return 0;for(var loweredCase=!1;;)switch(encoding){case"ascii":case"binary":case"raw":case"raws":return len;case"utf8":case"utf-8":return utf8ToBytes(string).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*len;case"hex":return len>>>1;case"base64":return base64ToBytes(string).length;default:if(loweredCase)return utf8ToBytes(string).length;encoding=(""+encoding).toLowerCase(),loweredCase=!0}}function slowToString(encoding,start,end){var loweredCase=!1;if(start=0|start,end=void 0===end||end===1/0?this.length:0|end,encoding||(encoding="utf8"),0>start&&(start=0),end>this.length&&(end=this.length),start>=end)return"";for(;;)switch(encoding){case"hex":return hexSlice(this,start,end);case"utf8":case"utf-8":return utf8Slice(this,start,end);case"ascii":return asciiSlice(this,start,end);case"binary":return binarySlice(this,start,end);case"base64":return base64Slice(this,start,end);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(encoding+"").toLowerCase(),loweredCase=!0}}function hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;length?(length=Number(length),length>remaining&&(length=remaining)):length=remaining;var strLen=string.length;if(strLen%2!==0)throw new Error("Invalid hex string");length>strLen/2&&(length=strLen/2);for(var i=0;length>i;i++){var parsed=parseInt(string.substr(2*i,2),16);if(isNaN(parsed))throw new Error("Invalid hex string");buf[offset+i]=parsed}return i}function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length)}function asciiWrite(buf,string,offset,length){return blitBuffer(asciiToBytes(string),buf,offset,length)}function binaryWrite(buf,string,offset,length){return asciiWrite(buf,string,offset,length)}function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length)}function ucs2Write(buf,string,offset,length){return blitBuffer(utf16leToBytes(string,buf.length-offset),buf,offset,length)}function base64Slice(buf,start,end){return 0===start&&end===buf.length?base64.fromByteArray(buf):base64.fromByteArray(buf.slice(start,end))}function utf8Slice(buf,start,end){end=Math.min(buf.length,end);for(var res=[],i=start;end>i;){var firstByte=buf[i],codePoint=null,bytesPerSequence=firstByte>239?4:firstByte>223?3:firstByte>191?2:1;if(end>=i+bytesPerSequence){var secondByte,thirdByte,fourthByte,tempCodePoint;switch(bytesPerSequence){case 1:128>firstByte&&(codePoint=firstByte);break;case 2:secondByte=buf[i+1],128===(192&secondByte)&&(tempCodePoint=(31&firstByte)<<6|63&secondByte,tempCodePoint>127&&(codePoint=tempCodePoint));break;case 3:secondByte=buf[i+1],thirdByte=buf[i+2],128===(192&secondByte)&&128===(192&thirdByte)&&(tempCodePoint=(15&firstByte)<<12|(63&secondByte)<<6|63&thirdByte,tempCodePoint>2047&&(55296>tempCodePoint||tempCodePoint>57343)&&(codePoint=tempCodePoint));break;case 4:secondByte=buf[i+1],thirdByte=buf[i+2],fourthByte=buf[i+3],128===(192&secondByte)&&128===(192&thirdByte)&&128===(192&fourthByte)&&(tempCodePoint=(15&firstByte)<<18|(63&secondByte)<<12|(63&thirdByte)<<6|63&fourthByte,tempCodePoint>65535&&1114112>tempCodePoint&&(codePoint=tempCodePoint))}}null===codePoint?(codePoint=65533,bytesPerSequence=1):codePoint>65535&&(codePoint-=65536,res.push(codePoint>>>10&1023|55296),codePoint=56320|1023&codePoint),res.push(codePoint),i+=bytesPerSequence}return decodeCodePointsArray(res)}function decodeCodePointsArray(codePoints){var len=codePoints.length;if(MAX_ARGUMENTS_LENGTH>=len)return String.fromCharCode.apply(String,codePoints);for(var res="",i=0;len>i;)res+=String.fromCharCode.apply(String,codePoints.slice(i,i+=MAX_ARGUMENTS_LENGTH));return res}function asciiSlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;end>i;i++)ret+=String.fromCharCode(127&buf[i]);return ret}function binarySlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;end>i;i++)ret+=String.fromCharCode(buf[i]);return ret}function hexSlice(buf,start,end){var len=buf.length;(!start||0>start)&&(start=0),(!end||0>end||end>len)&&(end=len);for(var out="",i=start;end>i;i++)out+=toHex(buf[i]);return out}function utf16leSlice(buf,start,end){for(var bytes=buf.slice(start,end),res="",i=0;i<bytes.length;i+=2)res+=String.fromCharCode(bytes[i]+256*bytes[i+1]);return res}function checkOffset(offset,ext,length){if(offset%1!==0||0>offset)throw new RangeError("offset is not uint");if(offset+ext>length)throw new RangeError("Trying to access beyond buffer length")}function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError("buffer must be a Buffer instance");if(value>max||min>value)throw new RangeError("value is out of bounds");if(offset+ext>buf.length)throw new RangeError("index out of range")}function objectWriteUInt16(buf,value,offset,littleEndian){0>value&&(value=65535+value+1);for(var i=0,j=Math.min(buf.length-offset,2);j>i;i++)buf[offset+i]=(value&255<<8*(littleEndian?i:1-i))>>>8*(littleEndian?i:1-i)}function objectWriteUInt32(buf,value,offset,littleEndian){0>value&&(value=4294967295+value+1);for(var i=0,j=Math.min(buf.length-offset,4);j>i;i++)buf[offset+i]=value>>>8*(littleEndian?i:3-i)&255}function checkIEEE754(buf,value,offset,ext,max,min){if(value>max||min>value)throw new RangeError("value is out of bounds");if(offset+ext>buf.length)throw new RangeError("index out of range");if(0>offset)throw new RangeError("index out of range")}function writeFloat(buf,value,offset,littleEndian,noAssert){return noAssert||checkIEEE754(buf,value,offset,4,3.4028234663852886e38,-3.4028234663852886e38),ieee754.write(buf,value,offset,littleEndian,23,4),offset+4}function writeDouble(buf,value,offset,littleEndian,noAssert){return noAssert||checkIEEE754(buf,value,offset,8,1.7976931348623157e308,-1.7976931348623157e308),ieee754.write(buf,value,offset,littleEndian,52,8),offset+8}function base64clean(str){if(str=stringtrim(str).replace(INVALID_BASE64_RE,""),str.length<2)return"";for(;str.length%4!==0;)str+="=";return str}function stringtrim(str){return str.trim?str.trim():str.replace(/^\s+|\s+$/g,"")}function toHex(n){return 16>n?"0"+n.toString(16):n.toString(16)}function utf8ToBytes(string,units){units=units||1/0;for(var codePoint,length=string.length,leadSurrogate=null,bytes=[],i=0;length>i;i++){if(codePoint=string.charCodeAt(i),codePoint>55295&&57344>codePoint){if(!leadSurrogate){if(codePoint>56319){(units-=3)>-1&&bytes.push(239,191,189);continue}if(i+1===length){(units-=3)>-1&&bytes.push(239,191,189);continue}leadSurrogate=codePoint;continue}if(56320>codePoint){(units-=3)>-1&&bytes.push(239,191,189),leadSurrogate=codePoint;continue}codePoint=(leadSurrogate-55296<<10|codePoint-56320)+65536}else leadSurrogate&&(units-=3)>-1&&bytes.push(239,191,189);if(leadSurrogate=null,128>codePoint){if((units-=1)<0)break;bytes.push(codePoint)}else if(2048>codePoint){if((units-=2)<0)break;bytes.push(codePoint>>6|192,63&codePoint|128)}else if(65536>codePoint){if((units-=3)<0)break;bytes.push(codePoint>>12|224,codePoint>>6&63|128,63&codePoint|128)}else{if(!(1114112>codePoint))throw new Error("Invalid code point");if((units-=4)<0)break;bytes.push(codePoint>>18|240,codePoint>>12&63|128,codePoint>>6&63|128,63&codePoint|128)}}return bytes}function asciiToBytes(str){for(var byteArray=[],i=0;i<str.length;i++)byteArray.push(255&str.charCodeAt(i));return byteArray}function utf16leToBytes(str,units){for(var c,hi,lo,byteArray=[],i=0;i<str.length&&!((units-=2)<0);i++)c=str.charCodeAt(i),hi=c>>8,lo=c%256,byteArray.push(lo),byteArray.push(hi);return byteArray}function base64ToBytes(str){return base64.toByteArray(base64clean(str))}function blitBuffer(src,dst,offset,length){for(var i=0;length>i&&!(i+offset>=dst.length||i>=src.length);i++)dst[i+offset]=src[i];return i}var base64=require("base64-js"),ieee754=require("ieee754"),isArray=require("isarray");exports.Buffer=Buffer,exports.SlowBuffer=SlowBuffer,exports.INSPECT_MAX_BYTES=50,Buffer.poolSize=8192;var rootParent={};Buffer.TYPED_ARRAY_SUPPORT=void 0!==global.TYPED_ARRAY_SUPPORT?global.TYPED_ARRAY_SUPPORT:typedArraySupport(),Buffer.TYPED_ARRAY_SUPPORT?(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array):(Buffer.prototype.length=void 0,Buffer.prototype.parent=void 0),Buffer.isBuffer=function(b){return!(null==b||!b._isBuffer)},Buffer.compare=function(a,b){if(!Buffer.isBuffer(a)||!Buffer.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var x=a.length,y=b.length,i=0,len=Math.min(x,y);len>i&&a[i]===b[i];)++i;return i!==len&&(x=a[i],y=b[i]),y>x?-1:x>y?1:0},Buffer.isEncoding=function(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(list,length){if(!isArray(list))throw new TypeError("list argument must be an Array of Buffers.");if(0===list.length)return new Buffer(0);var i;if(void 0===length)for(length=0,i=0;i<list.length;i++)length+=list[i].length;var buf=new Buffer(length),pos=0;for(i=0;i<list.length;i++){var item=list[i];item.copy(buf,pos),pos+=item.length}return buf},Buffer.byteLength=byteLength,Buffer.prototype.toString=function(){var length=0|this.length;return 0===length?"":0===arguments.length?utf8Slice(this,0,length):slowToString.apply(this,arguments)},Buffer.prototype.equals=function(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b?!0:0===Buffer.compare(this,b)},Buffer.prototype.inspect=function(){var str="",max=exports.INSPECT_MAX_BYTES;return this.length>0&&(str=this.toString("hex",0,max).match(/.{2}/g).join(" "),this.length>max&&(str+=" ... ")),"<Buffer "+str+">"},Buffer.prototype.compare=function(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b?0:Buffer.compare(this,b)},Buffer.prototype.indexOf=function(val,byteOffset){function arrayIndexOf(arr,val,byteOffset){for(var foundIndex=-1,i=0;byteOffset+i<arr.length;i++)if(arr[byteOffset+i]===val[-1===foundIndex?0:i-foundIndex]){if(-1===foundIndex&&(foundIndex=i),i-foundIndex+1===val.length)return byteOffset+foundIndex}else foundIndex=-1;return-1}if(byteOffset>2147483647?byteOffset=2147483647:-2147483648>byteOffset&&(byteOffset=-2147483648),byteOffset>>=0,0===this.length)return-1;if(byteOffset>=this.length)return-1;if(0>byteOffset&&(byteOffset=Math.max(this.length+byteOffset,0)),"string"==typeof val)return 0===val.length?-1:String.prototype.indexOf.call(this,val,byteOffset);if(Buffer.isBuffer(val))return arrayIndexOf(this,val,byteOffset);if("number"==typeof val)return Buffer.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,val,byteOffset):arrayIndexOf(this,[val],byteOffset);throw new TypeError("val must be string, number or Buffer")},Buffer.prototype.get=function(offset){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(offset)},Buffer.prototype.set=function(v,offset){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(v,offset)},Buffer.prototype.write=function(string,offset,length,encoding){if(void 0===offset)encoding="utf8",length=this.length,offset=0;else if(void 0===length&&"string"==typeof offset)encoding=offset,length=this.length,offset=0;else if(isFinite(offset))offset=0|offset,isFinite(length)?(length=0|length,void 0===encoding&&(encoding="utf8")):(encoding=length,length=void 0);else{var swap=encoding;encoding=offset,offset=0|length,length=swap}var remaining=this.length-offset;if((void 0===length||length>remaining)&&(length=remaining),string.length>0&&(0>length||0>offset)||offset>this.length)throw new RangeError("attempt to write outside buffer bounds");encoding||(encoding="utf8");for(var loweredCase=!1;;)switch(encoding){case"hex":return hexWrite(this,string,offset,length);case"utf8":case"utf-8":return utf8Write(this,string,offset,length);case"ascii":return asciiWrite(this,string,offset,length);case"binary":return binaryWrite(this,string,offset,length);case"base64":return base64Write(this,string,offset,length);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(""+encoding).toLowerCase(),loweredCase=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;Buffer.prototype.slice=function(start,end){var len=this.length;start=~~start,end=void 0===end?len:~~end,0>start?(start+=len,0>start&&(start=0)):start>len&&(start=len),0>end?(end+=len,0>end&&(end=0)):end>len&&(end=len),start>end&&(end=start);var newBuf;if(Buffer.TYPED_ARRAY_SUPPORT)newBuf=Buffer._augment(this.subarray(start,end));else{var sliceLen=end-start;newBuf=new Buffer(sliceLen,void 0);for(var i=0;sliceLen>i;i++)newBuf[i]=this[i+start]}return newBuf.length&&(newBuf.parent=this.parent||this),newBuf},Buffer.prototype.readUIntLE=function(offset,byteLength,noAssert){offset=0|offset,byteLength=0|byteLength,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset],mul=1,i=0;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return val},Buffer.prototype.readUIntBE=function(offset,byteLength,noAssert){offset=0|offset,byteLength=0|byteLength,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset+--byteLength],mul=1;byteLength>0&&(mul*=256);)val+=this[offset+--byteLength]*mul;return val},Buffer.prototype.readUInt8=function(offset,noAssert){return noAssert||checkOffset(offset,1,this.length),this[offset]},Buffer.prototype.readUInt16LE=function(offset,noAssert){return noAssert||checkOffset(offset,2,this.length),this[offset]|this[offset+1]<<8},Buffer.prototype.readUInt16BE=function(offset,noAssert){return noAssert||checkOffset(offset,2,this.length),this[offset]<<8|this[offset+1]},Buffer.prototype.readUInt32LE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+16777216*this[offset+3]},Buffer.prototype.readUInt32BE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),16777216*this[offset]+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3])},Buffer.prototype.readIntLE=function(offset,byteLength,noAssert){offset=0|offset,byteLength=0|byteLength,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset],mul=1,i=0;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return mul*=128,val>=mul&&(val-=Math.pow(2,8*byteLength)),val},Buffer.prototype.readIntBE=function(offset,byteLength,noAssert){offset=0|offset,byteLength=0|byteLength,noAssert||checkOffset(offset,byteLength,this.length);for(var i=byteLength,mul=1,val=this[offset+--i];i>0&&(mul*=256);)val+=this[offset+--i]*mul;return mul*=128,val>=mul&&(val-=Math.pow(2,8*byteLength)),val},Buffer.prototype.readInt8=function(offset,noAssert){return noAssert||checkOffset(offset,1,this.length),128&this[offset]?-1*(255-this[offset]+1):this[offset]},Buffer.prototype.readInt16LE=function(offset,noAssert){noAssert||checkOffset(offset,2,this.length);var val=this[offset]|this[offset+1]<<8;return 32768&val?4294901760|val:val},Buffer.prototype.readInt16BE=function(offset,noAssert){noAssert||checkOffset(offset,2,this.length);var val=this[offset+1]|this[offset]<<8;return 32768&val?4294901760|val:val},Buffer.prototype.readInt32LE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24},Buffer.prototype.readInt32BE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3]},Buffer.prototype.readFloatLE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),ieee754.read(this,offset,!0,23,4)},Buffer.prototype.readFloatBE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),ieee754.read(this,offset,!1,23,4)},Buffer.prototype.readDoubleLE=function(offset,noAssert){return noAssert||checkOffset(offset,8,this.length),ieee754.read(this,offset,!0,52,8)},Buffer.prototype.readDoubleBE=function(offset,noAssert){return noAssert||checkOffset(offset,8,this.length),ieee754.read(this,offset,!1,52,8)},Buffer.prototype.writeUIntLE=function(value,offset,byteLength,noAssert){value=+value,offset=0|offset,byteLength=0|byteLength,noAssert||checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength),0);var mul=1,i=0;for(this[offset]=255&value;++i<byteLength&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength},Buffer.prototype.writeUIntBE=function(value,offset,byteLength,noAssert){value=+value,offset=0|offset,byteLength=0|byteLength,noAssert||checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength),0);var i=byteLength-1,mul=1;for(this[offset+i]=255&value;--i>=0&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength},Buffer.prototype.writeUInt8=function(value,offset,noAssert){return value=+value,offset=0|offset,noAssert||checkInt(this,value,offset,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(value=Math.floor(value)),this[offset]=255&value,offset+1},Buffer.prototype.writeUInt16LE=function(value,offset,noAssert){return value=+value,offset=0|offset,noAssert||checkInt(this,value,offset,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8):objectWriteUInt16(this,value,offset,!0),offset+2},Buffer.prototype.writeUInt16BE=function(value,offset,noAssert){return value=+value,offset=0|offset,noAssert||checkInt(this,value,offset,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>8,this[offset+1]=255&value):objectWriteUInt16(this,value,offset,!1),offset+2},Buffer.prototype.writeUInt32LE=function(value,offset,noAssert){return value=+value,offset=0|offset,noAssert||checkInt(this,value,offset,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset+3]=value>>>24,this[offset+2]=value>>>16,this[offset+1]=value>>>8,this[offset]=255&value):objectWriteUInt32(this,value,offset,!0),offset+4},Buffer.prototype.writeUInt32BE=function(value,offset,noAssert){return value=+value,offset=0|offset,noAssert||checkInt(this,value,offset,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=255&value):objectWriteUInt32(this,value,offset,!1),offset+4},Buffer.prototype.writeIntLE=function(value,offset,byteLength,noAssert){if(value=+value,offset=0|offset,!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=0,mul=1,sub=0>value?1:0;for(this[offset]=255&value;++i<byteLength&&(mul*=256);)this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength},Buffer.prototype.writeIntBE=function(value,offset,byteLength,noAssert){if(value=+value,offset=0|offset,!noAssert){var limit=Math.pow(2,8*byteLength-1);
checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=byteLength-1,mul=1,sub=0>value?1:0;for(this[offset+i]=255&value;--i>=0&&(mul*=256);)this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength},Buffer.prototype.writeInt8=function(value,offset,noAssert){return value=+value,offset=0|offset,noAssert||checkInt(this,value,offset,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(value=Math.floor(value)),0>value&&(value=255+value+1),this[offset]=255&value,offset+1},Buffer.prototype.writeInt16LE=function(value,offset,noAssert){return value=+value,offset=0|offset,noAssert||checkInt(this,value,offset,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8):objectWriteUInt16(this,value,offset,!0),offset+2},Buffer.prototype.writeInt16BE=function(value,offset,noAssert){return value=+value,offset=0|offset,noAssert||checkInt(this,value,offset,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>8,this[offset+1]=255&value):objectWriteUInt16(this,value,offset,!1),offset+2},Buffer.prototype.writeInt32LE=function(value,offset,noAssert){return value=+value,offset=0|offset,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8,this[offset+2]=value>>>16,this[offset+3]=value>>>24):objectWriteUInt32(this,value,offset,!0),offset+4},Buffer.prototype.writeInt32BE=function(value,offset,noAssert){return value=+value,offset=0|offset,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),0>value&&(value=4294967295+value+1),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=255&value):objectWriteUInt32(this,value,offset,!1),offset+4},Buffer.prototype.writeFloatLE=function(value,offset,noAssert){return writeFloat(this,value,offset,!0,noAssert)},Buffer.prototype.writeFloatBE=function(value,offset,noAssert){return writeFloat(this,value,offset,!1,noAssert)},Buffer.prototype.writeDoubleLE=function(value,offset,noAssert){return writeDouble(this,value,offset,!0,noAssert)},Buffer.prototype.writeDoubleBE=function(value,offset,noAssert){return writeDouble(this,value,offset,!1,noAssert)},Buffer.prototype.copy=function(target,targetStart,start,end){if(start||(start=0),end||0===end||(end=this.length),targetStart>=target.length&&(targetStart=target.length),targetStart||(targetStart=0),end>0&&start>end&&(end=start),end===start)return 0;if(0===target.length||0===this.length)return 0;if(0>targetStart)throw new RangeError("targetStart out of bounds");if(0>start||start>=this.length)throw new RangeError("sourceStart out of bounds");if(0>end)throw new RangeError("sourceEnd out of bounds");end>this.length&&(end=this.length),target.length-targetStart<end-start&&(end=target.length-targetStart+start);var i,len=end-start;if(this===target&&targetStart>start&&end>targetStart)for(i=len-1;i>=0;i--)target[i+targetStart]=this[i+start];else if(1e3>len||!Buffer.TYPED_ARRAY_SUPPORT)for(i=0;len>i;i++)target[i+targetStart]=this[i+start];else target._set(this.subarray(start,start+len),targetStart);return len},Buffer.prototype.fill=function(value,start,end){if(value||(value=0),start||(start=0),end||(end=this.length),start>end)throw new RangeError("end < start");if(end!==start&&0!==this.length){if(0>start||start>=this.length)throw new RangeError("start out of bounds");if(0>end||end>this.length)throw new RangeError("end out of bounds");var i;if("number"==typeof value)for(i=start;end>i;i++)this[i]=value;else{var bytes=utf8ToBytes(value.toString()),len=bytes.length;for(i=start;end>i;i++)this[i]=bytes[i%len]}return this}},Buffer.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(Buffer.TYPED_ARRAY_SUPPORT)return new Buffer(this).buffer;for(var buf=new Uint8Array(this.length),i=0,len=buf.length;len>i;i+=1)buf[i]=this[i];return buf.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var BP=Buffer.prototype;Buffer._augment=function(arr){return arr.constructor=Buffer,arr._isBuffer=!0,arr._set=arr.set,arr.get=BP.get,arr.set=BP.set,arr.write=BP.write,arr.toString=BP.toString,arr.toLocaleString=BP.toString,arr.toJSON=BP.toJSON,arr.equals=BP.equals,arr.compare=BP.compare,arr.indexOf=BP.indexOf,arr.copy=BP.copy,arr.slice=BP.slice,arr.readUIntLE=BP.readUIntLE,arr.readUIntBE=BP.readUIntBE,arr.readUInt8=BP.readUInt8,arr.readUInt16LE=BP.readUInt16LE,arr.readUInt16BE=BP.readUInt16BE,arr.readUInt32LE=BP.readUInt32LE,arr.readUInt32BE=BP.readUInt32BE,arr.readIntLE=BP.readIntLE,arr.readIntBE=BP.readIntBE,arr.readInt8=BP.readInt8,arr.readInt16LE=BP.readInt16LE,arr.readInt16BE=BP.readInt16BE,arr.readInt32LE=BP.readInt32LE,arr.readInt32BE=BP.readInt32BE,arr.readFloatLE=BP.readFloatLE,arr.readFloatBE=BP.readFloatBE,arr.readDoubleLE=BP.readDoubleLE,arr.readDoubleBE=BP.readDoubleBE,arr.writeUInt8=BP.writeUInt8,arr.writeUIntLE=BP.writeUIntLE,arr.writeUIntBE=BP.writeUIntBE,arr.writeUInt16LE=BP.writeUInt16LE,arr.writeUInt16BE=BP.writeUInt16BE,arr.writeUInt32LE=BP.writeUInt32LE,arr.writeUInt32BE=BP.writeUInt32BE,arr.writeIntLE=BP.writeIntLE,arr.writeIntBE=BP.writeIntBE,arr.writeInt8=BP.writeInt8,arr.writeInt16LE=BP.writeInt16LE,arr.writeInt16BE=BP.writeInt16BE,arr.writeInt32LE=BP.writeInt32LE,arr.writeInt32BE=BP.writeInt32BE,arr.writeFloatLE=BP.writeFloatLE,arr.writeFloatBE=BP.writeFloatBE,arr.writeDoubleLE=BP.writeDoubleLE,arr.writeDoubleBE=BP.writeDoubleBE,arr.fill=BP.fill,arr.inspect=BP.inspect,arr.toArrayBuffer=BP.toArrayBuffer,arr};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":5,ieee754:6,isarray:7}],5:[function(require,module,exports){var lookup="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(exports){"use strict";function decode(elt){var code=elt.charCodeAt(0);return code===PLUS||code===PLUS_URL_SAFE?62:code===SLASH||code===SLASH_URL_SAFE?63:NUMBER>code?-1:NUMBER+10>code?code-NUMBER+26+26:UPPER+26>code?code-UPPER:LOWER+26>code?code-LOWER+26:void 0}function b64ToByteArray(b64){function push(v){arr[L++]=v}var i,j,l,tmp,placeHolders,arr;if(b64.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var len=b64.length;placeHolders="="===b64.charAt(len-2)?2:"="===b64.charAt(len-1)?1:0,arr=new Arr(3*b64.length/4-placeHolders),l=placeHolders>0?b64.length-4:b64.length;var L=0;for(i=0,j=0;l>i;i+=4,j+=3)tmp=decode(b64.charAt(i))<<18|decode(b64.charAt(i+1))<<12|decode(b64.charAt(i+2))<<6|decode(b64.charAt(i+3)),push((16711680&tmp)>>16),push((65280&tmp)>>8),push(255&tmp);return 2===placeHolders?(tmp=decode(b64.charAt(i))<<2|decode(b64.charAt(i+1))>>4,push(255&tmp)):1===placeHolders&&(tmp=decode(b64.charAt(i))<<10|decode(b64.charAt(i+1))<<4|decode(b64.charAt(i+2))>>2,push(tmp>>8&255),push(255&tmp)),arr}function uint8ToBase64(uint8){function encode(num){return lookup.charAt(num)}function tripletToBase64(num){return encode(num>>18&63)+encode(num>>12&63)+encode(num>>6&63)+encode(63&num)}var i,temp,length,extraBytes=uint8.length%3,output="";for(i=0,length=uint8.length-extraBytes;length>i;i+=3)temp=(uint8[i]<<16)+(uint8[i+1]<<8)+uint8[i+2],output+=tripletToBase64(temp);switch(extraBytes){case 1:temp=uint8[uint8.length-1],output+=encode(temp>>2),output+=encode(temp<<4&63),output+="==";break;case 2:temp=(uint8[uint8.length-2]<<8)+uint8[uint8.length-1],output+=encode(temp>>10),output+=encode(temp>>4&63),output+=encode(temp<<2&63),output+="="}return output}var Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,PLUS="+".charCodeAt(0),SLASH="/".charCodeAt(0),NUMBER="0".charCodeAt(0),LOWER="a".charCodeAt(0),UPPER="A".charCodeAt(0),PLUS_URL_SAFE="-".charCodeAt(0),SLASH_URL_SAFE="_".charCodeAt(0);exports.toByteArray=b64ToByteArray,exports.fromByteArray=uint8ToBase64}("undefined"==typeof exports?this.base64js={}:exports)},{}],6:[function(require,module,exports){exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,nBits=-7,i=isLE?nBytes-1:0,d=isLE?-1:1,s=buffer[offset+i];for(i+=d,e=s&(1<<-nBits)-1,s>>=-nBits,nBits+=eLen;nBits>0;e=256*e+buffer[offset+i],i+=d,nBits-=8);for(m=e&(1<<-nBits)-1,e>>=-nBits,nBits+=mLen;nBits>0;m=256*m+buffer[offset+i],i+=d,nBits-=8);if(0===e)e=1-eBias;else{if(e===eMax)return m?NaN:(s?-1:1)*(1/0);m+=Math.pow(2,mLen),e-=eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)},exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,rt=23===mLen?Math.pow(2,-24)-Math.pow(2,-77):0,i=isLE?0:nBytes-1,d=isLE?1:-1,s=0>value||0===value&&0>1/value?1:0;for(value=Math.abs(value),isNaN(value)||value===1/0?(m=isNaN(value)?1:0,e=eMax):(e=Math.floor(Math.log(value)/Math.LN2),value*(c=Math.pow(2,-e))<1&&(e--,c*=2),value+=e+eBias>=1?rt/c:rt*Math.pow(2,1-eBias),value*c>=2&&(e++,c/=2),e+eBias>=eMax?(m=0,e=eMax):e+eBias>=1?(m=(value*c-1)*Math.pow(2,mLen),e+=eBias):(m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen),e=0));mLen>=8;buffer[offset+i]=255&m,i+=d,m/=256,mLen-=8);for(e=e<<mLen|m,eLen+=mLen;eLen>0;buffer[offset+i]=255&e,i+=d,e/=256,eLen-=8);buffer[offset+i-d]|=128*s}},{}],7:[function(require,module,exports){var toString={}.toString;module.exports=Array.isArray||function(arr){return"[object Array]"==toString.call(arr)}},{}],8:[function(require,module,exports){"function"==typeof Object.create?module.exports=function(ctor,superCtor){ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype,ctor.prototype=new TempCtor,ctor.prototype.constructor=ctor}},{}],9:[function(require,module,exports){function cleanUpNextTick(){draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue()}function drainQueue(){if(!draining){var timeout=setTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,clearTimeout(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}var currentQueue,process=module.exports={},queue=[],draining=!1,queueIndex=-1;process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||setTimeout(drainQueue,0)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},{}],10:[function(require,module,exports){module.exports=function(arg){return arg&&"object"==typeof arg&&"function"==typeof arg.copy&&"function"==typeof arg.fill&&"function"==typeof arg.readUInt8}},{}],11:[function(require,module,exports){(function(process,global){function inspect(obj,opts){var ctx={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(ctx.depth=arguments[2]),arguments.length>=4&&(ctx.colors=arguments[3]),isBoolean(opts)?ctx.showHidden=opts:opts&&exports._extend(ctx,opts),isUndefined(ctx.showHidden)&&(ctx.showHidden=!1),isUndefined(ctx.depth)&&(ctx.depth=2),isUndefined(ctx.colors)&&(ctx.colors=!1),isUndefined(ctx.customInspect)&&(ctx.customInspect=!0),ctx.colors&&(ctx.stylize=stylizeWithColor),formatValue(ctx,obj,ctx.depth)}function stylizeWithColor(str,styleType){var style=inspect.styles[styleType];return style?"["+inspect.colors[style][0]+"m"+str+"["+inspect.colors[style][1]+"m":str}function stylizeNoColor(str,styleType){return str}function arrayToHash(array){var hash={};return array.forEach(function(val,idx){hash[val]=!0}),hash}function formatValue(ctx,value,recurseTimes){if(ctx.customInspect&&value&&isFunction(value.inspect)&&value.inspect!==exports.inspect&&(!value.constructor||value.constructor.prototype!==value)){var ret=value.inspect(recurseTimes,ctx);return isString(ret)||(ret=formatValue(ctx,ret,recurseTimes)),ret}var primitive=formatPrimitive(ctx,value);if(primitive)return primitive;var keys=Object.keys(value),visibleKeys=arrayToHash(keys);if(ctx.showHidden&&(keys=Object.getOwnPropertyNames(value)),isError(value)&&(keys.indexOf("message")>=0||keys.indexOf("description")>=0))return formatError(value);if(0===keys.length){if(isFunction(value)){var name=value.name?": "+value.name:"";return ctx.stylize("[Function"+name+"]","special")}if(isRegExp(value))return ctx.stylize(RegExp.prototype.toString.call(value),"regexp");if(isDate(value))return ctx.stylize(Date.prototype.toString.call(value),"date");if(isError(value))return formatError(value)}var base="",array=!1,braces=["{","}"];if(isArray(value)&&(array=!0,braces=["[","]"]),isFunction(value)){var n=value.name?": "+value.name:"";base=" [Function"+n+"]"}if(isRegExp(value)&&(base=" "+RegExp.prototype.toString.call(value)),isDate(value)&&(base=" "+Date.prototype.toUTCString.call(value)),isError(value)&&(base=" "+formatError(value)),0===keys.length&&(!array||0==value.length))return braces[0]+base+braces[1];if(0>recurseTimes)return isRegExp(value)?ctx.stylize(RegExp.prototype.toString.call(value),"regexp"):ctx.stylize("[Object]","special");ctx.seen.push(value);var output;return output=array?formatArray(ctx,value,recurseTimes,visibleKeys,keys):keys.map(function(key){return formatProperty(ctx,value,recurseTimes,visibleKeys,key,array)}),ctx.seen.pop(),reduceToSingleString(output,base,braces)}function formatPrimitive(ctx,value){if(isUndefined(value))return ctx.stylize("undefined","undefined");if(isString(value)){var simple="'"+JSON.stringify(value).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ctx.stylize(simple,"string")}return isNumber(value)?ctx.stylize(""+value,"number"):isBoolean(value)?ctx.stylize(""+value,"boolean"):isNull(value)?ctx.stylize("null","null"):void 0}function formatError(value){return"["+Error.prototype.toString.call(value)+"]"}function formatArray(ctx,value,recurseTimes,visibleKeys,keys){for(var output=[],i=0,l=value.length;l>i;++i)hasOwnProperty(value,String(i))?output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,String(i),!0)):output.push("");return keys.forEach(function(key){key.match(/^\d+$/)||output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,!0))}),output}function formatProperty(ctx,value,recurseTimes,visibleKeys,key,array){var name,str,desc;if(desc=Object.getOwnPropertyDescriptor(value,key)||{value:value[key]},desc.get?str=desc.set?ctx.stylize("[Getter/Setter]","special"):ctx.stylize("[Getter]","special"):desc.set&&(str=ctx.stylize("[Setter]","special")),hasOwnProperty(visibleKeys,key)||(name="["+key+"]"),str||(ctx.seen.indexOf(desc.value)<0?(str=isNull(recurseTimes)?formatValue(ctx,desc.value,null):formatValue(ctx,desc.value,recurseTimes-1),str.indexOf("\n")>-1&&(str=array?str.split("\n").map(function(line){return"  "+line}).join("\n").substr(2):"\n"+str.split("\n").map(function(line){return"   "+line}).join("\n"))):str=ctx.stylize("[Circular]","special")),isUndefined(name)){if(array&&key.match(/^\d+$/))return str;name=JSON.stringify(""+key),name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(name=name.substr(1,name.length-2),name=ctx.stylize(name,"name")):(name=name.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),name=ctx.stylize(name,"string"))}return name+": "+str}function reduceToSingleString(output,base,braces){var numLinesEst=0,length=output.reduce(function(prev,cur){return numLinesEst++,cur.indexOf("\n")>=0&&numLinesEst++,prev+cur.replace(/\u001b\[\d\d?m/g,"").length+1},0);return length>60?braces[0]+(""===base?"":base+"\n ")+" "+output.join(",\n  ")+" "+braces[1]:braces[0]+base+" "+output.join(", ")+" "+braces[1]}function isArray(ar){return Array.isArray(ar)}function isBoolean(arg){return"boolean"==typeof arg}function isNull(arg){return null===arg}function isNullOrUndefined(arg){return null==arg}function isNumber(arg){return"number"==typeof arg}function isString(arg){return"string"==typeof arg}function isSymbol(arg){return"symbol"==typeof arg}function isUndefined(arg){return void 0===arg}function isRegExp(re){return isObject(re)&&"[object RegExp]"===objectToString(re)}function isObject(arg){return"object"==typeof arg&&null!==arg}function isDate(d){return isObject(d)&&"[object Date]"===objectToString(d)}function isError(e){return isObject(e)&&("[object Error]"===objectToString(e)||e instanceof Error)}function isFunction(arg){return"function"==typeof arg}function isPrimitive(arg){return null===arg||"boolean"==typeof arg||"number"==typeof arg||"string"==typeof arg||"symbol"==typeof arg||"undefined"==typeof arg}function objectToString(o){return Object.prototype.toString.call(o)}function pad(n){return 10>n?"0"+n.toString(10):n.toString(10)}function timestamp(){var d=new Date,time=[pad(d.getHours()),pad(d.getMinutes()),pad(d.getSeconds())].join(":");return[d.getDate(),months[d.getMonth()],time].join(" ")}function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}var formatRegExp=/%[sdj%]/g;exports.format=function(f){if(!isString(f)){for(var objects=[],i=0;i<arguments.length;i++)objects.push(inspect(arguments[i]));return objects.join(" ")}for(var i=1,args=arguments,len=args.length,str=String(f).replace(formatRegExp,function(x){if("%%"===x)return"%";if(i>=len)return x;switch(x){case"%s":return String(args[i++]);case"%d":return Number(args[i++]);case"%j":try{return JSON.stringify(args[i++])}catch(_){return"[Circular]"}default:return x}}),x=args[i];len>i;x=args[++i])str+=isNull(x)||!isObject(x)?" "+x:" "+inspect(x);return str},exports.deprecate=function(fn,msg){function deprecated(){if(!warned){if(process.throwDeprecation)throw new Error(msg);process.traceDeprecation?console.trace(msg):console.error(msg),warned=!0}return fn.apply(this,arguments)}if(isUndefined(global.process))return function(){return exports.deprecate(fn,msg).apply(this,arguments)};if(process.noDeprecation===!0)return fn;var warned=!1;return deprecated};var debugEnviron,debugs={};exports.debuglog=function(set){if(isUndefined(debugEnviron)&&(debugEnviron=process.env.NODE_DEBUG||""),set=set.toUpperCase(),!debugs[set])if(new RegExp("\\b"+set+"\\b","i").test(debugEnviron)){var pid=process.pid;debugs[set]=function(){var msg=exports.format.apply(exports,arguments);console.error("%s %d: %s",set,pid,msg)}}else debugs[set]=function(){};return debugs[set]},exports.inspect=inspect,inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},exports.isArray=isArray,exports.isBoolean=isBoolean,exports.isNull=isNull,exports.isNullOrUndefined=isNullOrUndefined,exports.isNumber=isNumber,exports.isString=isString,exports.isSymbol=isSymbol,exports.isUndefined=isUndefined,exports.isRegExp=isRegExp,exports.isObject=isObject,exports.isDate=isDate,exports.isError=isError,exports.isFunction=isFunction,exports.isPrimitive=isPrimitive,exports.isBuffer=require("./support/isBuffer");var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];exports.log=function(){console.log("%s - %s",timestamp(),exports.format.apply(exports,arguments))},exports.inherits=require("inherits"),exports._extend=function(origin,add){if(!add||!isObject(add))return origin;for(var keys=Object.keys(add),i=keys.length;i--;)origin[keys[i]]=add[keys[i]];return origin}}).call(this,require("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":10,_process:9,inherits:8}],12:[function(require,module,exports){function create(tag){return select("<"==tag.charAt(0)?newElement(tag):document.createElement(tag))}var newElement=require("new-element"),select=require("./lib/select");module.exports=select,module.exports.create=create},{"./lib/select":16,"new-element":45}],13:[function(require,module,exports){function attr(chain){return function(element,name,value){return 2==arguments.length?element.getAttribute(name):(element.setAttribute(name,value),chain)}}module.exports=attr},{}],14:[function(require,module,exports){function shortcut(type){return function(element,callback){return on(element,type,callback)}}function off(element,event,selector,callback){return 4==arguments.length?delegate.unbind(element,selector,event,callback):(callback=selector,void events.off(element,event,callback))}function on(element,event,selector,callback){return 3==arguments.length&&(callback=selector),4==arguments.length?delegate.bind(element,selector,event,callback):void events.on(element,event,callback)}function onKey(element,key,callback){keyEvent.on(element,key,callback)}function offKey(element,key,callback){keyEvent.off(element,key,callback)}var events=require("dom-event"),delegate=require("component-delegate"),keyEvent=require("key-event");require("trim");module.exports={change:shortcut("change"),click:shortcut("click"),keydown:shortcut("keydown"),keyup:shortcut("keyup"),keypress:shortcut("keypress"),mousedown:shortcut("mousedown"),mouseover:shortcut("mouseover"),mouseup:shortcut("mouseup"),resize:shortcut("resize"),on:on,off:off,onKey:onKey,offKey:offKey}},{"component-delegate":19,"dom-event":26,"key-event":40,trim:49}],15:[function(require,module,exports){function html(chain){return function(element,newValue,vars){return arguments.length>1?(element.innerHTML=arguments.length>2?format(newValue,vars):newValue,chain):element.innerHTML}}var format=require("format-text");module.exports=html},{"format-text":39}],16:[function(require,module,exports){function select(query){var key,chain,methods,elements;elements="string"==typeof query&&"<"==query.charAt(0)?[newElement(query,arguments[1])]:"string"==typeof query?Array.prototype.slice.call(selectDOM(query,arguments[1])):query==document?[document.documentElement]:1==arguments.length&&Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments),methods={addClass:applyEachElement(classes.add,elements),removeClass:applyEachElement(classes.remove,elements),toggleClass:applyEachElement(classes.toggle,elements),show:applyEachElement(style.show,elements),hide:applyEachElement(style.hide,elements),style:applyEachElement(style,elements)};for(key in events)methods[key]=applyEachElement(events[key],elements);for(key in tree)methods[key]=applyEachElement(tree[key],elements);return chain=newChain.from(elements)(methods),chain.attr=applyEachElement(attr(chain),elements),chain.classes=applyEachElement(classes,elements),chain.hasClass=applyEachElement(classes.has,elements),chain.html=applyEachElement(html(chain),elements),chain.text=applyEachElement(text(chain),elements),chain.val=applyEachElement(value(chain),elements),chain.value=applyEachElement(value(chain),elements),chain.parent=selectEachElement(parent,elements),chain.select=selectEachElement(selectChild,elements),chain.siblings=selectEachElement(siblings,elements),chain}function parent(element,selector){return selector?closest(element,selector):element.parentNode}function selectChild(element,query){return select(query,element)}function applyEachElement(fn,elements){if(!fn)throw new Error("Undefined function.");return function(){var i,len,ret,params,ret;for(len=elements.length,i=-1,params=[void 0].concat(Array.prototype.slice.call(arguments));++i<len;)params[0]=elements[i],ret=fn.apply(void 0,params);return ret}}function selectEachElement(fn,els){return function(){for(var ret,t,tlen,result=[],params=[void 0].concat(Array.prototype.slice.call(arguments)),len=els.length,i=-1;++i<len;)if(params[0]=els[i],ret=fn.apply(void 0,params),Array.isArray(ret))for(tlen=ret.length,t=-1;++t<tlen;)-1==result.indexOf(ret[t])&&result.push(ret[t]);else ret&&-1==result.indexOf(ret)&&result.push(ret);return select(result)}}var newChain=require("new-chain"),classes=(require("format-text"),require("dom-classes")),tree=require("dom-tree"),newElement=require("new-element"),selectDOM=require("dom-select").all,style=require("dom-style"),closest=require("discore-closest"),siblings=require("siblings"),attr=require("./attr"),events=require("./events"),html=require("./html"),text=require("./text"),value=require("./value");module.exports=select},{"./attr":13,"./events":14,"./html":15,"./text":17,"./value":18,"discore-closest":21,"dom-classes":24,"dom-select":28,"dom-style":30,"dom-tree":34,"format-text":39,"new-chain":44,"new-element":45,siblings:47}],17:[function(require,module,exports){function text(chain){return function(element,newValue,vars){return arguments.length>1?(element.textContent=arguments.length>2?format(newValue,vars):newValue,chain):element.textContent}}var format=require("format-text");module.exports=text},{"format-text":39}],18:[function(require,module,exports){function withChain(chain){return function(el,update){return 2==arguments.length?(value(el,update),chain):value(el)}}var value=require("dom-value");module.exports=withChain},{"dom-value":37}],19:[function(require,module,exports){var closest=require("closest"),event=require("event");exports.bind=function(el,selector,type,fn,capture){return event.bind(el,type,function(e){var target=e.target||e.srcElement;e.delegateTarget=closest(target,selector,!0,el),e.delegateTarget&&fn.call(el,e)},capture)},exports.unbind=function(el,type,fn,capture){event.unbind(el,type,fn,capture)}},{closest:21,event:20}],20:[function(require,module,exports){var bind=window.addEventListener?"addEventListener":"attachEvent",unbind=window.removeEventListener?"removeEventListener":"detachEvent",prefix="addEventListener"!==bind?"on":"";exports.bind=function(el,type,fn,capture){return el[bind](prefix+type,fn,capture||!1),fn},exports.unbind=function(el,type,fn,capture){return el[unbind](prefix+type,fn,capture||!1),fn}},{}],21:[function(require,module,exports){var matches=require("matches-selector");module.exports=function(element,selector,checkYoSelf,root){for(element=checkYoSelf?{parentNode:element}:element,root=root||document;(element=element.parentNode)&&element!==document;){if(matches(element,selector))return element;if(element===root)return}}},{"matches-selector":22}],22:[function(require,module,exports){function match(el,selector){if(!el||1!==el.nodeType)return!1;if(vendor)return vendor.call(el,selector);for(var nodes=query.all(selector,el.parentNode),i=0;i<nodes.length;++i)if(nodes[i]==el)return!0;return!1}var query=require("query"),proto=Element.prototype,vendor=proto.matches||proto.webkitMatchesSelector||proto.mozMatchesSelector||proto.msMatchesSelector||proto.oMatchesSelector;module.exports=match},{query:23}],23:[function(require,module,exports){function one(selector,el){return el.querySelector(selector)}exports=module.exports=function(selector,el){return el=el||document,one(selector,el)},exports.all=function(selector,el){return el=el||document,el.querySelectorAll(selector)},exports.engine=function(obj){if(!obj.one)throw new Error(".one callback required");if(!obj.all)throw new Error(".all callback required");return one=obj.one,exports.all=obj.all,exports}},{}],24:[function(require,module,exports){function classes(el){if(el.classList)return el.classList;var str=el.className.replace(/^\s+|\s+$/g,""),arr=str.split(whitespaceRe);return""===arr[0]&&arr.shift(),arr}function add(el,name){if(el.classList)return void el.classList.add(name);var arr=classes(el),i=index(arr,name);~i||arr.push(name),el.className=arr.join(" ")}function has(el,name){return el.classList?el.classList.contains(name):!!~index(classes(el),name)}function remove(el,name){if("[object RegExp]"==toString.call(name))return removeMatching(el,name);if(el.classList)return void el.classList.remove(name);var arr=classes(el),i=index(arr,name);~i&&arr.splice(i,1),el.className=arr.join(" ")}function removeMatching(el,re,ref){for(var arr=Array.prototype.slice.call(classes(el)),i=0;i<arr.length;i++)re.test(arr[i])&&remove(el,arr[i])}function toggle(el,name){return el.classList?el.classList.toggle(name):void(has(el,name)?remove(el,name):add(el,name))}var index=require("indexof"),whitespaceRe=/\s+/,toString=Object.prototype.toString;module.exports=classes,module.exports.add=add,module.exports.contains=has,module.exports.has=has,module.exports.toggle=toggle,module.exports.remove=remove,module.exports.removeMatching=removeMatching},{indexof:25}],25:[function(require,module,exports){var indexOf=[].indexOf;module.exports=function(arr,obj){if(indexOf)return arr.indexOf(obj);for(var i=0;i<arr.length;++i)if(arr[i]===obj)return i;return-1}},{}],26:[function(require,module,exports){function on(element,event,callback,capture){return!element.addEventListener&&(event="on"+event),(element.addEventListener||element.attachEvent).call(element,event,callback,capture),callback}function off(element,event,callback,capture){return!element.removeEventListener&&(event="on"+event),(element.removeEventListener||element.detachEvent).call(element,event,callback,capture),callback}module.exports=on,module.exports.on=on,module.exports.off=off},{}],27:[function(require,module,exports){function all(selector,parent){return qwery(selector,parent)}function one(selector,parent){return all(selector,parent)[0]}var qwery=require("qwery");module.exports={one:one,all:all}},{qwery:29}],28:[function(require,module,exports){function one(selector,parent){return parent||(parent=document),parent.querySelector?parent.querySelector(selector):fallback.one(selector,parent)}function all(selector,parent){return parent||(parent=document),parent.querySelectorAll?parent.querySelectorAll(selector):fallback.all(selector,parent)}var fallback=require("./fallback");module.exports=one,module.exports.all=all},{"./fallback":27}],29:[function(require,module,exports){!function(name,context,definition){"undefined"!=typeof module&&module.exports?module.exports=definition():"function"==typeof define&&define.amd?define(definition):context[name]=definition()}("qwery",this,function(){function cache(){this.c={}}function classRegex(c){return classCache.g(c)||classCache.s(c,"(^|\\s+)"+c+"(\\s+|$)",1)}function each(a,fn){for(var i=0,l=a.length;l>i;i++)fn(a[i])}function flatten(ar){for(var r=[],i=0,l=ar.length;l>i;++i)arrayLike(ar[i])?r=r.concat(ar[i]):r[r.length]=ar[i];return r}function arrayify(ar){for(var i=0,l=ar.length,r=[];l>i;i++)r[i]=ar[i];return r}function previous(n){for(;(n=n.previousSibling)&&1!=n[nodeType];);return n}function q(query){return query.match(chunker)}function interpret(whole,tag,idsAndClasses,wholeAttribute,attribute,qualifier,value,wholePseudo,pseudo,wholePseudoVal,pseudoVal){var i,m,k,o,classes;if(1!==this[nodeType])return!1;if(tag&&"*"!==tag&&this[tagName]&&this[tagName].toLowerCase()!==tag)return!1;if(idsAndClasses&&(m=idsAndClasses.match(id))&&m[1]!==this.id)return!1;if(idsAndClasses&&(classes=idsAndClasses.match(clas)))for(i=classes.length;i--;)if(!classRegex(classes[i].slice(1)).test(this.className))return!1;if(pseudo&&qwery.pseudos[pseudo]&&!qwery.pseudos[pseudo](this,pseudoVal))return!1;if(wholeAttribute&&!value){o=this.attributes;for(k in o)if(Object.prototype.hasOwnProperty.call(o,k)&&(o[k].name||k)==attribute)return this}return wholeAttribute&&!checkAttr(qualifier,getAttr(this,attribute)||"",value)?!1:this}function clean(s){return cleanCache.g(s)||cleanCache.s(s,s.replace(specialChars,"\\$1"))}function checkAttr(qualify,actual,val){switch(qualify){case"=":
return actual==val;case"^=":return actual.match(attrCache.g("^="+val)||attrCache.s("^="+val,"^"+clean(val),1));case"$=":return actual.match(attrCache.g("$="+val)||attrCache.s("$="+val,clean(val)+"$",1));case"*=":return actual.match(attrCache.g(val)||attrCache.s(val,clean(val),1));case"~=":return actual.match(attrCache.g("~="+val)||attrCache.s("~="+val,"(?:^|\\s+)"+clean(val)+"(?:\\s+|$)",1));case"|=":return actual.match(attrCache.g("|="+val)||attrCache.s("|="+val,"^"+clean(val)+"(-|$)",1))}return 0}function _qwery(selector,_root){var i,l,m,token,els,intr,item,r=[],ret=[],root=_root,tokens=tokenCache.g(selector)||tokenCache.s(selector,selector.split(tokenizr)),dividedTokens=selector.match(dividers);if(!tokens.length)return r;if(token=(tokens=tokens.slice(0)).pop(),tokens.length&&(m=tokens[tokens.length-1].match(idOnly))&&(root=byId(_root,m[1])),!root)return r;for(intr=q(token),els=root!==_root&&9!==root[nodeType]&&dividedTokens&&/^[+~]$/.test(dividedTokens[dividedTokens.length-1])?function(r){for(;root=root.nextSibling;)1==root[nodeType]&&(intr[1]?intr[1]==root[tagName].toLowerCase():1)&&(r[r.length]=root);return r}([]):root[byTag](intr[1]||"*"),i=0,l=els.length;l>i;i++)(item=interpret.apply(els[i],intr))&&(r[r.length]=item);return tokens.length?(each(r,function(e){ancestorMatch(e,tokens,dividedTokens)&&(ret[ret.length]=e)}),ret):r}function is(el,selector,root){if(isNode(selector))return el==selector;if(arrayLike(selector))return!!~flatten(selector).indexOf(el);for(var tokens,dividedTokens,selectors=selector.split(",");selector=selectors.pop();)if(tokens=tokenCache.g(selector)||tokenCache.s(selector,selector.split(tokenizr)),dividedTokens=selector.match(dividers),tokens=tokens.slice(0),interpret.apply(el,q(tokens.pop()))&&(!tokens.length||ancestorMatch(el,tokens,dividedTokens,root)))return!0;return!1}function ancestorMatch(el,tokens,dividedTokens,root){function crawl(e,i,p){for(;p=walker[dividedTokens[i]](p,e);)if(isNode(p)&&interpret.apply(p,q(tokens[i]))){if(!i)return p;if(cand=crawl(p,i-1,p))return cand}}var cand;return(cand=crawl(el,tokens.length-1,el))&&(!root||isAncestor(cand,root))}function isNode(el,t){return el&&"object"==typeof el&&(t=el[nodeType])&&(1==t||9==t)}function uniq(ar){var i,j,a=[];o:for(i=0;i<ar.length;++i){for(j=0;j<a.length;++j)if(a[j]==ar[i])continue o;a[a.length]=ar[i]}return a}function arrayLike(o){return"object"==typeof o&&isFinite(o.length)}function normalizeRoot(root){return root?"string"==typeof root?qwery(root)[0]:!root[nodeType]&&arrayLike(root)?root[0]:root:doc}function byId(root,id,el){return 9===root[nodeType]?root.getElementById(id):root.ownerDocument&&((el=root.ownerDocument.getElementById(id))&&isAncestor(el,root)&&el||!isAncestor(root,root.ownerDocument)&&select('[id="'+id+'"]',root)[0])}function qwery(selector,_root){var m,el,root=normalizeRoot(_root);if(!root||!selector)return[];if(selector===window||isNode(selector))return!_root||selector!==window&&isNode(root)&&isAncestor(selector,root)?[selector]:[];if(selector&&arrayLike(selector))return flatten(selector);if(m=selector.match(easy)){if(m[1])return(el=byId(root,m[1]))?[el]:[];if(m[2])return arrayify(root[byTag](m[2]));if(hasByClass&&m[3])return arrayify(root[byClass](m[3]))}return select(selector,root)}function collectSelector(root,collector){return function(s){var oid,nid;return splittable.test(s)?void(9!==root[nodeType]&&((nid=oid=root.getAttribute("id"))||root.setAttribute("id",nid="__qwerymeupscotty"),s='[id="'+nid+'"]'+s,collector(root.parentNode||root,s,!0),oid||root.removeAttribute("id"))):void(s.length&&collector(root,s,!1))}}var select,doc=document,html=doc.documentElement,byClass="getElementsByClassName",byTag="getElementsByTagName",qSA="querySelectorAll",useNativeQSA="useNativeQSA",tagName="tagName",nodeType="nodeType",id=/#([\w\-]+)/,clas=/\.[\w\-]+/g,idOnly=/^#([\w\-]+)$/,classOnly=/^\.([\w\-]+)$/,tagOnly=/^([\w\-]+)$/,tagAndOrClass=/^([\w]+)?\.([\w\-]+)$/,splittable=/(^|,)\s*[>~+]/,normalizr=/^\s+|\s*([,\s\+\~>]|$)\s*/g,splitters=/[\s\>\+\~]/,splittersMore=/(?![\s\w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^'"]*\]|[\s\w\+\-]*\))/,specialChars=/([.*+?\^=!:${}()|\[\]\/\\])/g,simple=/^(\*|[a-z0-9]+)?(?:([\.\#]+[\w\-\.#]+)?)/,attr=/\[([\w\-]+)(?:([\|\^\$\*\~]?\=)['"]?([ \w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^]+)["']?)?\]/,pseudo=/:([\w\-]+)(\(['"]?([^()]+)['"]?\))?/,easy=new RegExp(idOnly.source+"|"+tagOnly.source+"|"+classOnly.source),dividers=new RegExp("("+splitters.source+")"+splittersMore.source,"g"),tokenizr=new RegExp(splitters.source+splittersMore.source),chunker=new RegExp(simple.source+"("+attr.source+")?("+pseudo.source+")?"),walker={" ":function(node){return node&&node!==html&&node.parentNode},">":function(node,contestant){return node&&node.parentNode==contestant.parentNode&&node.parentNode},"~":function(node){return node&&node.previousSibling},"+":function(node,contestant,p1,p2){return node?(p1=previous(node))&&(p2=previous(contestant))&&p1==p2&&p1:!1}};cache.prototype={g:function(k){return this.c[k]||void 0},s:function(k,v,r){return v=r?new RegExp(v):v,this.c[k]=v}};var classCache=new cache,cleanCache=new cache,attrCache=new cache,tokenCache=new cache,isAncestor="compareDocumentPosition"in html?function(element,container){return 16==(16&container.compareDocumentPosition(element))}:"contains"in html?function(element,container){return container=9===container[nodeType]||container==window?html:container,container!==element&&container.contains(element)}:function(element,container){for(;element=element.parentNode;)if(element===container)return 1;return 0},getAttr=function(){var e=doc.createElement("p");return(e.innerHTML='<a href="#x">x</a>')&&"#x"!=e.firstChild.getAttribute("href")?function(e,a){return"class"===a?e.className:"href"===a||"src"===a?e.getAttribute(a,2):e.getAttribute(a)}:function(e,a){return e.getAttribute(a)}}(),hasByClass=!!doc[byClass],hasQSA=doc.querySelector&&doc[qSA],selectQSA=function(selector,root){var ss,e,result=[];try{return 9!==root[nodeType]&&splittable.test(selector)?(each(ss=selector.split(","),collectSelector(root,function(ctx,s){e=ctx[qSA](s),1==e.length?result[result.length]=e.item(0):e.length&&(result=result.concat(arrayify(e)))})),ss.length>1&&result.length>1?uniq(result):result):arrayify(root[qSA](selector))}catch(ex){}return selectNonNative(selector,root)},selectNonNative=function(selector,root){var items,m,i,l,r,ss,result=[];if(selector=selector.replace(normalizr,"$1"),m=selector.match(tagAndOrClass)){for(r=classRegex(m[2]),items=root[byTag](m[1]||"*"),i=0,l=items.length;l>i;i++)r.test(items[i].className)&&(result[result.length]=items[i]);return result}return each(ss=selector.split(","),collectSelector(root,function(ctx,s,rewrite){for(r=_qwery(s,ctx),i=0,l=r.length;l>i;i++)(9===ctx[nodeType]||rewrite||isAncestor(r[i],root))&&(result[result.length]=r[i])})),ss.length>1&&result.length>1?uniq(result):result},configure=function(options){"undefined"!=typeof options[useNativeQSA]&&(select=options[useNativeQSA]&&hasQSA?selectQSA:selectNonNative)};return configure({useNativeQSA:!0}),qwery.configure=configure,qwery.uniq=uniq,qwery.is=is,qwery.pseudos={},qwery})},{}],30:[function(require,module,exports){function all(element,css){var name;for(name in css)one(element,name,css[name])}function effect(name,value){return function(element,override){style(element,name,arguments.length>1?override:value)}}function one(element,name,value){element.style[toCamelCase("float"==name?"cssFloat":name)]=value}function style(element){return 3==arguments.length?one(element,arguments[1],arguments[2]):all(element,arguments[1])}var toCamelCase=require("to-camel-case");module.exports=style,module.exports.hide=effect("display","none"),module.exports.show=effect("display","initial")},{"to-camel-case":31}],31:[function(require,module,exports){function toCamelCase(string){return space(string).replace(/\s(\w)/g,function(matches,letter){return letter.toUpperCase()})}var space=require("to-space-case");module.exports=toCamelCase},{"to-space-case":32}],32:[function(require,module,exports){function toSpaceCase(string){return clean(string).replace(/[\W_]+(.|$)/g,function(matches,match){return match?" "+match:""}).trim()}var clean=require("to-no-case");module.exports=toSpaceCase},{"to-no-case":33}],33:[function(require,module,exports){function toNoCase(string){return hasSpace.test(string)?string.toLowerCase():hasSeparator.test(string)?(unseparate(string)||string).toLowerCase():uncamelize(string).toLowerCase()}function unseparate(string){return string.replace(separatorSplitter,function(m,next){return next?" "+next:""})}function uncamelize(string){return string.replace(camelSplitter,function(m,previous,uppers){return previous+" "+uppers.toLowerCase().split("").join(" ")})}module.exports=toNoCase;var hasSpace=/\s/,hasSeparator=/[\W_]/,separatorSplitter=/[\W_]+(.|$)/g,camelSplitter=/(.)([A-Z]+)/g},{}],34:[function(require,module,exports){function add(parent,child,vars){select(parent).appendChild(newElement(child,vars))}function addAfter(parent,child){var ref=select(arguments[arguments.length-1],parent).nextSibling,vars=arguments.length>3?arguments[2]:void 0;return null==ref?add(parent,child,vars):void addBefore(parent,child,vars,ref)}function addBefore(parent,child){var ref=arguments[arguments.length-1],vars=arguments.length>3?arguments[2]:void 0;select(parent).insertBefore(newElement(child,vars),select(ref,parent))}function insert(element){var parent=arguments[arguments.length-1],vars=arguments.length>2?arguments[1]:void 0;add(select(parent),element,vars)}function replace(parent,target,repl,vars){select(parent).replaceChild(select(newElement(repl,vars)),select(target,parent))}function remove(element,child){var i,all;if(1==arguments.length&&"string"!=typeof element)return element.parentNode.removeChild(element);for(all=arguments.length>1?select.all(child,element):select.all(element),i=all.length;i--;)all[i].parentNode.removeChild(all[i])}function withChildren(fn){return function(_,children){Array.isArray(children)||(children=[children]);for(var i=-1,len=children.length,params=Array.prototype.slice.call(arguments);++i<len;)params[1]=children[i],fn.apply(void 0,params)}}var newElement=require("./new-element"),select=require("./select");module.exports={add:withChildren(add),addAfter:withChildren(addAfter),addBefore:withChildren(addBefore),insert:insert,replace:replace,remove:remove}},{"./new-element":35,"./select":36}],35:[function(require,module,exports){function ifNecessary(html,vars){return isHTML(html)?newElement(html,vars):html}function isHTML(text){return"string"==typeof text&&"<"==text.charAt(0)}var newElement=require("new-element");module.exports=ifNecessary},{"new-element":45}],36:[function(require,module,exports){function ifNecessary(child,parent){return Array.isArray(child)&&(child=child[0]),"string"!=typeof child?child:("string"==typeof parent&&(parent=select(parent,document)),select(child,parent))}function ifNecessaryAll(child,parent){return Array.isArray(child)&&(child=child[0]),"string"!=typeof child?[child]:("string"==typeof parent&&(parent=select(parent,document)),select.all(child,parent))}var select=require("dom-select");module.exports=ifNecessary,module.exports.all=ifNecessaryAll},{"dom-select":28}],37:[function(require,module,exports){function get(el){switch(type(el)){case"checkbox":case"radio":if(el.checked){var attr=el.getAttribute("value");return null==attr?!0:attr}return!1;case"radiogroup":for(var radio,i=0;radio=el[i];i++)if(radio.checked)return radio.value;break;case"select":for(var option,i=0;option=el.options[i];i++)if(option.selected)return option.value;break;default:return el.value}}function set(el,val){switch(type(el)){case"checkbox":case"radio":val?el.checked=!0:el.checked=!1;break;case"radiogroup":for(var radio,i=0;radio=el[i];i++)radio.checked=radio.value===val;break;case"select":for(var option,i=0;option=el.options[i];i++)option.selected=option.value===val;break;default:el.value=val}}function type(el){var group="array"==typeOf(el)||"object"==typeOf(el);group&&(el=el[0]);var name=el.nodeName.toLowerCase(),type=el.getAttribute("type");return group&&type&&"radio"==type.toLowerCase()?"radiogroup":"input"==name&&type&&"checkbox"==type.toLowerCase()?"checkbox":"input"==name&&type&&"radio"==type.toLowerCase()?"radio":"select"==name?"select":name}var typeOf=require("component-type");module.exports=function(el,val){return 2==arguments.length?set(el,val):get(el)}},{"component-type":38}],38:[function(require,module,exports){(function(Buffer){var toString=Object.prototype.toString;module.exports=function(val){switch(toString.call(val)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}return null===val?"null":void 0===val?"undefined":val!==val?"nan":val&&1===val.nodeType?"element":"undefined"!=typeof Buffer&&Buffer.isBuffer(val)?"buffer":(val=val.valueOf?val.valueOf():Object.prototype.valueOf.apply(val),typeof val)}}).call(this,require("buffer").Buffer)},{buffer:4}],39:[function(require,module,exports){function format(text){var context;return context="object"==typeof arguments[1]&&arguments[1]?arguments[1]:Array.prototype.slice.call(arguments,1),String(text).replace(/\{?\{([^{}]+)}}?/g,replace(context))}function replace(context,nil){return function(tag,name){return"{{"==tag.substring(0,2)&&"}}"==tag.substring(tag.length-2)?"{"+name+"}":context.hasOwnProperty(name)?"function"==typeof context[name]?context[name]():context[name]:tag}}module.exports=format},{}],40:[function(require,module,exports){function on(element,keys,callback){var expected=parse(keys),fn=events.on(element,"keyup",function(event){(event.ctrlKey||void 0)==expected.ctrl&&(event.altKey||void 0)==expected.alt&&(event.shiftKey||void 0)==expected.shift&&keynameOf(event.keyCode)==expected.key&&callback(event)});return callback["cb-"+keys]=fn,callback}function off(element,keys,callback){events.off(element,"keyup",callback["cb-"+keys])}function parse(keys){var result={};keys=keys.split(/[^\w]+/);for(var name,i=keys.length;i--;)name=keys[i].trim(),"ctrl"!=name?"alt"!=name?"shift"!=name?result.key=name.trim():result.shift=!0:result.alt=!0:result.ctrl=!0;return result}var keynameOf=require("keyname-of"),events=require("dom-event");module.exports=on,module.exports.on=on,module.exports.off=off},{"dom-event":41,"keyname-of":42}],41:[function(require,module,exports){function on(element,event,callback,capture){return(element.addEventListener||element.attachEvent).call(element,event,callback,capture),callback}function off(element,event,callback,capture){return(element.removeEventListener||element.detachEvent).call(element,event,callback,capture),callback}module.exports=on,module.exports.on=on,module.exports.off=off},{}],42:[function(require,module,exports){function keynameOf(n){return map[n]||String.fromCharCode(n).toLowerCase()}var map=require("keynames");module.exports=keynameOf},{keynames:43}],43:[function(require,module,exports){module.exports={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"}},{}],44:[function(require,module,exports){function from(chain){return function(){var m,i;for(m=methods.apply(void 0,arguments),i=m.length;i--;)chain[m[i].name]=m[i].fn;return m.forEach(function(method){chain[method.name]=function(){return method.fn.apply(this,arguments),chain}}),chain}}function methods(){var all,el,i,result,key;for(all=Array.prototype.slice.call(arguments),result=[],i=all.length;i--;)if(el=all[i],"function"!=typeof el){if("object"==typeof el)for(key in el)result.push({name:key,fn:el[key]})}else result.push({name:el.name,fn:el});return result}function newChain(){return from({}).apply(void 0,arguments)}module.exports=newChain,module.exports.from=from},{}],45:[function(require,module,exports){function newElement(html,vars){return domify(1==arguments.length?html:format(html,vars))}var domify=require("domify"),format=require("format-text");module.exports=newElement},{domify:46,"format-text":39}],46:[function(require,module,exports){function parse(html){if("string"!=typeof html)throw new TypeError("String expected");var m=/<([\w:]+)/.exec(html);if(!m)throw new Error("No elements were generated.");var tag=m[1];if("body"==tag){var el=document.createElement("html");return el.innerHTML=html,el.removeChild(el.lastChild)}var wrap=map[tag]||map._default,depth=wrap[0],prefix=wrap[1],suffix=wrap[2],el=document.createElement("div");for(el.innerHTML=prefix+html+suffix;depth--;)el=el.lastChild;var els=el.children;if(1==els.length)return el.removeChild(els[0]);for(var fragment=document.createDocumentFragment();els.length;)fragment.appendChild(el.removeChild(els[0]));return fragment}module.exports=parse;var map={option:[1,'<select multiple="multiple">',"</select>"],optgroup:[1,'<select multiple="multiple">',"</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tbody:[1,"<table>","</table>"],tfoot:[1,"<table>","</table>"],colgroup:[1,"<table>","</table>"],caption:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],th:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:[0,"",""]}},{}],47:[function(require,module,exports){var matches=require("matches-selector");module.exports=function(el,selector){for(var node=el.parentNode.firstChild,siblings=[];node;node=node.nextSibling)1===node.nodeType&&node!==el&&(selector?matches(node,selector)&&siblings.push(node):siblings.push(node));return siblings}},{"matches-selector":48}],48:[function(require,module,exports){"use strict";function match(el,selector){if(vendor)return vendor.call(el,selector);for(var nodes=el.parentNode.querySelectorAll(selector),i=0;i<nodes.length;i++)if(nodes[i]==el)return!0;return!1}var proto=Element.prototype,vendor=proto.matches||proto.matchesSelector||proto.webkitMatchesSelector||proto.mozMatchesSelector||proto.msMatchesSelector||proto.oMatchesSelector;module.exports=match},{}],49:[function(require,module,exports){function trim(str){return str.replace(/^\s*|\s*$/g,"")}exports=module.exports=trim,exports.left=function(str){return str.replace(/^\s*/,"")},exports.right=function(str){return str.replace(/\s*$/,"")}},{}],50:[function(require,module,exports){module.exports={enableOn:function(el,opts){var Tap=require("./touchy"),ins=new Tap(el,opts);return ins}}},{"./touchy":69}],51:[function(require,module,exports){var now=function(){return Date.now()};module.exports=function(f,ms,ctx,immediate){var ts,fn,args,timeout=null;return fn=function(){ctx=ctx||this,args=arguments,ts=now();var later=function(){var diff=now()-ts;return ms>diff?void(timeout=setTimeout(later,ms-diff)):(timeout=null,void(immediate||f.apply(ctx,args)))};null===timeout&&(immediate&&f.apply(ctx,args),timeout=setTimeout(later,ms))},fn.cancel=function(){clearTimeout(timeout)},fn}},{}],52:[function(require,module,exports){var evtLifeCycle={},extend=require("extend"),cache=require("./lib/event-cache"),getEventCache=cache.getCache.bind(cache),dispatchEvent=require("./lib/dispatch-event"),domEvent=require("dom-event"),wrapCallback=require("./lib/wrap-callback");module.exports={register:function(evt,lifecycle){evtLifeCycle[evt]=lifecycle},trigger:function(ele,event){if(!event)throw new Error("event is required");var eventCache=getEventCache(ele);eventCache=eventCache[event],eventCache&&Object.keys(eventCache).forEach(function(fnId){var fn=eventCache[fnId];fn&&fn.apply(ele,[{type:event}])})},fire:function(ele,evt,opts){dispatchEvent(ele,evt,opts)},on:function(ele,event,selector,callback,capture){var me=this;if(!ele)throw new Error("missing argument element");if(!event)throw new Error("missing argument event");event.split(/\s+/).forEach(function(type){var parts=type.split("."),eventName=parts.shift(),descriptor={event:eventName,selector:selector,callback:callback,capture:capture,ns:parts.reduce(function(seq,ns){return seq[ns]=!0,seq},{})};me._on(ele,descriptor)})},_on:function(ele,descriptor){descriptor=descriptor||{};var event=descriptor.event,selector=descriptor.selector,capture=descriptor.capture,ns=descriptor.ns;"function"==typeof selector&&(descriptor.callback=selector,selector="");var callbackId=require("./lib/get-callback-id")(descriptor.callback),eventLifeCycleEvent=evtLifeCycle[event],eventCache=getEventCache(ele,event);eventLifeCycleEvent&&(0===Object.keys(eventCache).length&&eventLifeCycleEvent.setup&&eventLifeCycleEvent.setup.apply(ele,[descriptor]),eventLifeCycleEvent.add&&eventLifeCycleEvent.add.apply(ele,[descriptor]));var callback=descriptor.callback;callback.xFId=callbackId;var wrappedFn=wrapCallback(ele,callback,ns,selector);return eventCache[wrappedFn.xFId]=wrappedFn,domEvent.on(ele,event,wrappedFn,capture)},off:function(ele,event,callback,capture){var me=this;event.split(/\s+/).forEach(function(type){var parts=type.split("."),eventName=parts.shift(),descriptor={event:eventName,callback:callback,capture:capture,ns:parts.reduce(function(seq,ns){return seq[ns]=!0,seq},{})};me._off(ele,descriptor)})},_doRemoveEvent:function(ele,event,callback,capture){var eventCache=getEventCache(ele),currentEventCache=eventCache[event];if(currentEventCache){var xFId=callback.xFId;if(xFId){delete currentEventCache[xFId];var eventLifeCycleEvent=evtLifeCycle[event];eventLifeCycleEvent&&eventLifeCycleEvent.remove&&eventLifeCycleEvent.remove.apply(ele,{event:event,callback:callback,capture:capture}),0===Object.keys(eventCache).length&&(delete eventCache[event],eventLifeCycleEvent&&eventLifeCycleEvent.teardown&&eventLifeCycleEvent.teardown.apply(ele,{event:event,callback:callback,capture:capture}))}domEvent.off(ele,event,callback,capture)}},_off:function(ele,descriptor){var me=this,eventCache=getEventCache(ele),events=Object.keys(eventCache);if(0!==events.length&&(descriptor.event||events.forEach(function(event){me._off(ele,extend({},descriptor,{event:event}))}),eventCache=eventCache[descriptor.event],eventCache&&0!==Object.keys(eventCache).length)){var callback=descriptor.callback;if(callback){var id=callback.xFId;return void(id&&Object.keys(eventCache).forEach(function(key){var fn=eventCache[key];fn.callbackId===id&&me._doRemoveEvent(ele,descriptor.event,fn,descriptor.capture)}))}var namespaces=Object.keys(descriptor.ns),hasNamespaces=namespaces.length>0;Object.keys(eventCache).forEach(function(fnId){var fn=eventCache[fnId];hasNamespaces?namespaces.forEach(function(namespace){fn.xNS[namespace]&&me._doRemoveEvent(ele,descriptor.event,fn,descriptor.capture)}):me._doRemoveEvent(ele,descriptor.event,fn,descriptor.capture)})}}}},{"./lib/dispatch-event":53,"./lib/event-cache":54,"./lib/get-callback-id":55,"./lib/wrap-callback":57,"dom-event":67,extend:68}],53:[function(require,module,exports){(function(global){module.exports=function(ele,event,options){var extend=require("extend"),opts=extend({bubbles:!0},options),setEvent=!1,CustomEvent=global.CustomEvent;if(CustomEvent){var evt;try{evt=new CustomEvent(event,opts),ele.dispatchEvent(evt),setEvent=!0}catch(ex){setEvent=!1}}if(!setEvent){var dispatchEvent=require("dispatch-event");dispatchEvent(ele,event,opts)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"dispatch-event":61,extend:68}],54:[function(require,module,exports){function getCache(ele,event,_cache){var eleId;return ele===document&&(eleId="document"),ele===window&&(eleId="window"),eleId||(eleId=ele.getAttribute("x-des-id"),eleId||(eleId=getId(),ele.setAttribute("x-des-id",eleId))),_cache[eleId]=_cache[eleId]||{},event?(_cache[eleId][event]=_cache[eleId][event]||{},_cache[eleId][event]):_cache[eleId]}var cache={},idGen=require("./id-gen"),getId=idGen.create("dom-ele");module.exports={getCache:function(ele,event){return getCache(ele,event,cache)}}},{"./id-gen":56}],55:[function(require,module,exports){var idGen=require("./id-gen"),getFnId=idGen.create("fn");module.exports=function(callback){var eleId=callback.xFId;return eleId||(eleId=getFnId(),callback.xFId=eleId),eleId}},{"./id-gen":56}],56:[function(require,module,exports){module.exports={create:function(prefix){var counter=0;return function(){return prefix+"-"+Date.now()+"-"+counter++}}}},{}],57:[function(require,module,exports){var closest=require("component-closest"),getIdOfCallback=require("./get-callback-id");module.exports=function(ele,callback,ns,selector){var fn=function(e){var args=arguments;if(!selector)return callback.apply(ele,args);var closestEle=closest(e.target||e.srcElement,selector,ele);return closestEle?callback.apply(closestEle,args):void 0};return getIdOfCallback(fn),fn.xNS=ns,fn.callbackId=getIdOfCallback(callback),fn}},{"./get-callback-id":55,"component-closest":58}],58:[function(require,module,exports){function closest(el,selector,scope){for(scope=scope||document.documentElement;el&&el!==scope;){if(matches(el,selector))return el;el=el.parentNode}return matches(el,selector)?el:null}var matches=require("matches-selector");module.exports=closest},{"matches-selector":59}],59:[function(require,module,exports){arguments[4][22][0].apply(exports,arguments)},{dup:22,query:60}],60:[function(require,module,exports){arguments[4][23][0].apply(exports,arguments)},{dup:23}],61:[function(require,module,exports){"use strict";var DOMEvent=require("@bendrucker/synthetic-dom-events"),assert=require("assert");module.exports=function(element,event,options){return assert(element,"A DOM element is required"),"string"==typeof event&&(event=DOMEvent(event,options)),element.dispatchEvent(event),event}},{"@bendrucker/synthetic-dom-events":62,assert:2}],62:[function(require,module,exports){function check_kb(ev,opts){return(ev.ctrlKey!=(opts.ctrlKey||!1)||ev.altKey!=(opts.altKey||!1)||ev.shiftKey!=(opts.shiftKey||!1)||ev.metaKey!=(opts.metaKey||!1)||ev.keyCode!=(opts.keyCode||0)||ev.charCode!=(opts.charCode||0))&&(ev=doc.createEvent("Event"),ev.initEvent(opts.type,opts.bubbles,opts.cancelable),ev.ctrlKey=opts.ctrlKey||!1,ev.altKey=opts.altKey||!1,ev.shiftKey=opts.shiftKey||!1,ev.metaKey=opts.metaKey||!1,ev.keyCode=opts.keyCode||0,ev.charCode=opts.charCode||0),ev}var doc=(require("global/window"),require("global/document")),use_key_event=(doc.documentElement||{},!0);try{doc.createEvent("KeyEvents")}catch(err){use_key_event=!1}var modern=function(type,opts){opts=opts||{};var family=typeOf(type),init_fam=family;"KeyboardEvent"===family&&use_key_event&&(family="KeyEvents",init_fam="KeyEvent");var ev=doc.createEvent(family),init_fn="init"+init_fam,init="function"==typeof ev[init_fn]?init_fn:"initEvent",sig=initSignatures[init],args=[],used={};opts.type=type;for(var i=0;i<sig.length;++i){var key=sig[i],val=opts[key];void 0===val&&(val=ev[key]),used[key]=!0,args.push(val)}ev[init].apply(ev,args),"KeyboardEvent"===family&&(ev=check_kb(ev,opts));for(var key in opts)used[key]||(ev[key]=opts[key]);return ev},legacy=function(type,opts){opts=opts||{};var ev=doc.createEventObject();ev.type=type;for(var key in opts)void 0!==opts[key]&&(ev[key]=opts[key]);return ev};module.exports=doc.createEvent?modern:legacy;var initSignatures=require("./init.json"),types=require("./types.json"),typeOf=function(){var typs={};for(var key in types)for(var ts=types[key],i=0;i<ts.length;i++)typs[ts[i]]=key;return function(name){return typs[name]||"Event"}}()},{"./init.json":63,"./types.json":66,"global/document":64,"global/window":65}],63:[function(require,module,exports){module.exports={initEvent:["type","bubbles","cancelable"],initUIEvent:["type","bubbles","cancelable","view","detail"],initMouseEvent:["type","bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget"],initMutationEvent:["type","bubbles","cancelable","relatedNode","prevValue","newValue","attrName","attrChange"],initKeyboardEvent:["type","bubbles","cancelable","view","ctrlKey","altKey","shiftKey","metaKey","keyCode","charCode"],initKeyEvent:["type","bubbles","cancelable","view","ctrlKey","altKey","shiftKey","metaKey","keyCode","charCode"]}},{}],64:[function(require,module,exports){(function(global){var topLevel="undefined"!=typeof global?global:"undefined"!=typeof window?window:{},minDoc=require("min-document");if("undefined"!=typeof document)module.exports=document;else{var doccy=topLevel["__GLOBAL_DOCUMENT_CACHE@4"];doccy||(doccy=topLevel["__GLOBAL_DOCUMENT_CACHE@4"]=minDoc),module.exports=doccy}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"min-document":3}],65:[function(require,module,exports){(function(global){"undefined"!=typeof window?module.exports=window:"undefined"!=typeof global?module.exports=global:"undefined"!=typeof self?module.exports=self:module.exports={}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],66:[function(require,module,exports){module.exports={MouseEvent:["click","mousedown","mouseup","mouseover","mousemove","mouseout"],KeyboardEvent:["keydown","keyup","keypress"],MutationEvent:["DOMSubtreeModified","DOMNodeInserted","DOMNodeRemoved","DOMNodeRemovedFromDocument","DOMNodeInsertedIntoDocument","DOMAttrModified","DOMCharacterDataModified"],HTMLEvents:["load","unload","abort","error","select","change","submit","reset","focus","blur","resize","scroll"],UIEvent:["DOMFocusIn","DOMFocusOut","DOMActivate"]}},{}],67:[function(require,module,exports){arguments[4][26][0].apply(exports,arguments)},{dup:26}],68:[function(require,module,exports){"use strict";var hasOwn=Object.prototype.hasOwnProperty,toStr=Object.prototype.toString,isArray=function(arr){return"function"==typeof Array.isArray?Array.isArray(arr):"[object Array]"===toStr.call(arr)},isPlainObject=function(obj){if(!obj||"[object Object]"!==toStr.call(obj))return!1;var hasOwnConstructor=hasOwn.call(obj,"constructor"),hasIsPrototypeOf=obj.constructor&&obj.constructor.prototype&&hasOwn.call(obj.constructor.prototype,"isPrototypeOf");if(obj.constructor&&!hasOwnConstructor&&!hasIsPrototypeOf)return!1;var key;for(key in obj);return"undefined"==typeof key||hasOwn.call(obj,key)};module.exports=function extend(){var options,name,src,copy,copyIsArray,clone,target=arguments[0],i=1,length=arguments.length,deep=!1;for("boolean"==typeof target?(deep=target,target=arguments[1]||{},i=2):("object"!=typeof target&&"function"!=typeof target||null==target)&&(target={});length>i;++i)if(options=arguments[i],null!=options)for(name in options)src=target[name],copy=options[name],target!==copy&&(deep&&copy&&(isPlainObject(copy)||(copyIsArray=isArray(copy)))?(copyIsArray?(copyIsArray=!1,clone=src&&isArray(src)?src:[]):clone=src&&isPlainObject(src)?src:{},target[name]=extend(deep,clone,copy)):"undefined"!=typeof copy&&(target[name]=copy));return target}},{}],69:[function(require,module,exports){function Touchy(el,opts){var me=this;me._opts={minSwipeDeltaX:25,minSwipeDeltaY:25,tap:!0,taphold:!0,swipe:!0,minTapDisplacementTolerance:10,tapHoldMinThreshold:500,swipeThreshold:1e3,mousedownThreshold:500,discardTapholdIfMove:!0},extend(me._opts,opts);var ele=me.el="object"==typeof el&&null!==el?el:document.getElementById(el);me.moved=!1,me.startX=0,me.startY=0,me._mouseEventsAllowed=!0,me.setMouseEventsAllowed=debounce(function(){me._mouseEventsAllowed=!0},me._opts.mousedownThreshold),ele.addEventListener("touchstart",me,!1),ele.addEventListener("mousedown",me,!1)}var debounce=require("debouncy"),extend=require("extend"),eventHelper=require("dom-event-special"),tapProto=Touchy.prototype;tapProto.blockMouseEvents=function(){var me=this;me._mouseEventsAllowed=!1,me.setMouseEventsAllowed()},tapProto._getClientX=function(e){return e.touches&&e.touches.length>0?e.touches[0].clientX:e.clientX},tapProto._getClientY=function(e){return e.touches&&e.touches.length>0?e.touches[0].clientY:e.clientY;
},tapProto._getPageX=function(e){return e.touches&&e.touches.length>0?e.touches[0].pageX:e.pageX},tapProto._getPageY=function(e){return e.touches&&e.touches.length>0?e.touches[0].pageY:e.pageY},tapProto.start=function(e){var me=this,ele=me.el;me.startTime=Date.now(),"touchstart"===e.type&&(ele.addEventListener("touchmove",me,!1),ele.addEventListener("touchend",me,!1),ele.addEventListener("touchcancel",me,!1),me.checkForTaphold(e),me.blockMouseEvents()),"mousedown"!==e.type||!me._mouseEventsAllowed||1!==e.which&&0!==e.button||(ele.addEventListener("mousemove",me,!1),ele.addEventListener("mouseup",me,!1),me.checkForTaphold(e)),me.startTarget=e.target,me.handlingStart=!0,me.moved=!1,me.startX=me._getClientX(e),me.startY=me._getClientY(e)},tapProto.checkForTaphold=function(e){var me=this;me._opts.taphold&&(clearTimeout(me.tapHoldInterval),me.tapHoldInterval=setTimeout(function(){me.moved&&me._opts.discardTapholdIfMove||!me.handlingStart||!me._opts.taphold||eventHelper.fire(me.startTarget,"tap:hold",{bubbles:!0,cancelable:!0,detail:{pageX:me._getPageX(e),pageY:me._getPageY(e)}})},me._opts.tapHoldMinThreshold))},tapProto.move=function(e){var me=this;me._moveX=me._getClientX(e),me._moveY=me._getClientY(e);var tolerance=me._opts.minTapDisplacementTolerance;(Math.abs(me._moveX-this.startX)>tolerance||Math.abs(me._moveY-this.startY)>tolerance)&&(this.moved=!0)},tapProto.end=function(e){var me=this,ele=me.el;ele.removeEventListener("mousemove",me,!1),ele.removeEventListener("touchmove",me,!1),ele.removeEventListener("touchend",me,!1),ele.removeEventListener("touchcancel",me,!1),ele.removeEventListener("mouseup",me,!1);var target=e.target,endTime=Date.now(),timeDelta=endTime-me.startTime;if(me.handlingStart=!1,clearTimeout(me.tapHoldInterval),!me.moved)return target!==me.startTarget||timeDelta>me._opts.tapHoldMinThreshold?void(me.startTarget=null):void(me._opts.tap&&eventHelper.fire(target,"tap",{bubbles:!0,cancelable:!0,detail:{pageX:me._getPageX(e),pageY:me._getPageY(e)}}));if(me._opts.swipe&&!(timeDelta>me._opts.swipeThreshold)){var deltaX=me._moveX-me.startX,deltaY=me._moveY-me.startY,absDeltaX=Math.abs(deltaX),absDeltaY=Math.abs(deltaY),swipeInX=absDeltaX>me._opts.minSwipeDeltaX,swipeInY=absDeltaY>me._opts.minSwipeDeltaY,swipeHappen=swipeInX||swipeInY;if(swipeHappen){var direction="";direction+=absDeltaX>=absDeltaY?deltaX>0?"right":"left":deltaY>0?"down":"up",eventHelper.fire(target,"swipe",{bubbles:!0,cancelable:!0,detail:{direction:direction,deltaX:deltaX,deltaY:deltaY}}),eventHelper.fire(target,"swipe:"+direction,{bubbles:!0,cancelable:!0,detail:{direction:direction,deltaX:deltaX,deltaY:deltaY}})}}},tapProto.cancel=function(){var me=this;clearTimeout(me.tapHoldInterval),me.handlingStart=!1,me.moved=!1,me.startX=0,me.startY=0},tapProto.destroy=function(){var me=this,ele=me.el;me.handlingStart=!1,clearTimeout(me.tapHoldInterval),ele.removeEventListener("touchstart",me,!1),ele.removeEventListener("touchmove",me,!1),ele.removeEventListener("touchend",me,!1),ele.removeEventListener("touchcancel",me,!1),ele.removeEventListener("mousedown",me,!1),ele.removeEventListener("mouseup",me,!1),me.el=null},tapProto.handleEvent=function(e){var me=this;switch(e.type){case"touchstart":me.start(e);break;case"mousemove":me.move(e);break;case"touchmove":me.move(e);break;case"touchend":me.end(e);break;case"touchcancel":me.cancel(e);break;case"mousedown":me.start(e);break;case"mouseup":me.end(e)}},module.exports=Touchy},{debouncy:51,"dom-event-special":52,extend:68}],70:[function(require,module,exports){"use strict";module.exports=function(source,properties){for(var property in properties)properties.hasOwnProperty(property)&&(source[property]=properties[property]);return source}},{}],71:[function(require,module,exports){"use strict";module.exports=function(html,options){for(var match,result,re=/<%(.+?)%>/g,reExp=/(^( )?(var|if|for|else|switch|case|break|{|}|;))(.*)?/g,code="with(obj) { var r=[];\n",cursor=0,add=function(line,js){return code+=js?line.match(reExp)?line+"\n":"r.push("+line+");\n":""!=line?'r.push("'+line.replace(/"/g,'\\"')+'");\n':"",add};match=re.exec(html);)add(html.slice(cursor,match.index))(match[1],!0),cursor=match.index+match[0].length;add(html.substr(cursor,html.length-cursor)),code=(code+'return r.join(""); }').replace(/[\r\t\n]/g,"");try{result=new Function("obj",code).apply(options,[options])}catch(err){console.error("'"+err.message+"'"," in \n\nCode:\n",code,"\n")}return result}},{}]},{},[1])(1)});
